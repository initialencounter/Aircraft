import {describe, expect, it} from 'vitest'
import {matchBatteryWeight, matchCapacity, matchVoltage, matchWattHour} from '../src/lithium/shared/utils'
import {checkPekBtyType, checkSekBtyType} from "../src";
import {readFileSync, writeFileSync} from "fs";

// it('should return null for inputs without voltage', () => {
//   for (let i = 1; i < 163; i++) {
//     let data = require(`./data/pek/data${i}.json`)
//     let otherDescribeCAddition = data['otherDescribeCAddition']
//     let mess = matchBatteryWeight(otherDescribeCAddition)
//     if (isNaN(mess)) continue
//     if (mess === 0) continue
//     console.log(`expect(matchBatteryWeight(\`${otherDescribeCAddition}\`)).toBe(${mess})`)
//   }
// })

describe('匹配方法测试', () => {
  // matchWattHour 测试
  describe('matchWattHour', () => {
    it('应正确匹配基本瓦时数值', () => {
      expect(matchWattHour('蓝牙耳机充电盒 MOTO BUDS-S ANC 1.8Wh（与摩托罗拉主动降噪蓝牙耳机 MOTO BUDS-S ANC 包装在一起）')).toBe(1.8)
      expect(matchWattHour('可充电锂离子电池 112570 3.85V 58mAh 0.224Wh')).toBe(0.224)
      expect(matchWattHour('剃须刀 30-00159-W（内置锂离子聚合物电池 622560 3.7V 1080mAh 3.996Wh）')).toBe(3.996)
      expect(matchWattHour('移动数据终端 CT37-X1N（内置可充式锂离子电池组 341322PM4 3.85V 85mAh 0.328Wh）')).toBe(0.328)
      expect(matchWattHour('可充电锂离子电芯 INR18650-2600 3.6V 2600mAh 9.36Wh')).toBe(9.36)
      expect(matchWattHour('分光相机 DVC-45（内置聚合物锂电池 JH 103035 3.7V 2200mAh 8.14Wh）')).toBe(8.14)
      expect(matchWattHour('机械键盘 RK-S98（内置锂离子电池 5543120 3.7V 3750mAh 13.875Wh）')).toBe(13.875)
      expect(matchWattHour('可充电锂离子电池 406282 3.7V 3000mAh 11.1Wh')).toBe(11.1)
      expect(matchWattHour('移动数据终端 CT37-X1N（内置可充式锂离子电池组 341322PM4 3.85V 85mAh 0.328Wh）')).toBe(0.328)
      expect(matchWattHour('多功能美容仪 MCB011 (内置圆柱锂电池 18650 3.7V 2000mAh 7.4Wh)')).toBe(7.4)
      expect(matchWattHour('机械键盘 RK-M75（内置锂离子电池 5543120 3.7V 3750mAh 13.875Wh）')).toBe(13.875)
      expect(matchWattHour('太阳能三防灯 AI-X2200（内置磷酸铁锂电池 YLY12812 12.8V 12Ah 153.6Wh）')).toBe(153.6)
      expect(matchWattHour('锂离子电池\锂离子充电电池芯\锂离子电池芯\锂电池\锂电电池芯\锂电芯\锂聚合物电芯\可充电锂离子聚合物电芯 CA405067-W 3.69V 2000mAh 7.38Wh')).toBe(7.38)
      expect(matchWattHour('便携式储能电源 JY2K2048 2048Wh')).toBe(2048)
      expect(matchWattHour('移动电源 JUI-PBANK-24000-ECO 88.8Wh')).toBe(88.8)
      expect(matchWattHour('机械键盘 RK-H81（内置锂离子电池 5543120 3.7V 3750mAh 13.875Wh）')).toBe(13.875)
      expect(matchWattHour('机械键盘 RK100（内置锂离子电池 5543120 3.7V 3750mAh 13.875Wh）')).toBe(13.875)
      expect(matchWattHour('储能电源 ES800 768Wh')).toBe(768)
      expect(matchWattHour('锂离子聚合物电池 30100103 3.7V 4000mAh 14.8Wh')).toBe(14.8)
      expect(matchWattHour('移动电源 PB10BL5000-PDM 19.25Wh')).toBe(19.25)
      expect(matchWattHour('机械键盘 RK96（内置锂离子电池 5543120 3.7V 3750mAh 13.875Wh）')).toBe(13.875)
      expect(matchWattHour('锂离子电芯 KY13500 3.7V 800mAh 2.96Wh')).toBe(2.96)
      expect(matchWattHour('电子狗项圈 Halo Collar 4（内置可充电锂离子电池组 GRP812050 3.8V 860mAh 3.268Wh）')).toBe(3.268)
      expect(matchWattHour('TATA 5G 通信模块 PRO L263 8732706（内置二次鋰電池組 4111619 3.2V 1.6Ah 5.12Wh）')).toBe(5.12)
      expect(matchWattHour('TATA 5G 通信模块 LITE L262 8732705（内置二次鋰電池組 4111619 3.2V 1.6Ah 5.12Wh）')).toBe(5.12)
      expect(matchWattHour('蓝牙键盘保护套 THZ967US-50（内置锂离子聚合物电池 TW 304355 3.7V 750mAh 2.775Wh）')).toBe(2.775)
      expect(matchWattHour('蓝牙耳机 ANW03MGO（内置锂聚合物电池 EN602030 3.7V 300mAh 1.11Wh）')).toBe(1.11)
      expect(matchWattHour('锂离子电池 CLY702030 3.7V 350mAh 1.295Wh')).toBe(1.295)
      expect(matchWattHour('磷酸铁锂电池 YLY12836H 12.8V 36Ah 460.8Wh')).toBe(460.8)
      expect(matchWattHour('电动自行车 mkz-tricielecneg（内置锂电池组 BF4815 48V 15Ah 720Wh）')).toBe(720)
      expect(matchWattHour('移动电源 EC-C37 37Wh')).toBe(37)
      expect(matchWattHour('锂离子电池 IC-48V27-HP 48V 27Ah 1296Wh')).toBe(1296)
      expect(matchWattHour('锂离子电芯 KLP 12350 3.7V 400mAh 1.48Wh')).toBe(1.48)
      expect(matchWattHour('锂离子电池 IC-36V27-HP 36V 27Ah 972Wh')).toBe(972)
      expect(matchWattHour('锂离子电池 551138 3.7V 200mAh 0.74Wh')).toBe(0.74)
      expect(matchWattHour('美容仪 DSF-1000（内置聚合物锂离子电池 JC 102050 3.7V 1000mAh 3.7Wh）')).toBe(3.7)
      expect(matchWattHour('手电筒 T1420（内置可充电锂离子电池 18650-3200 3.6V 3000mAh 10.8Wh）')).toBe(10.8)
      expect(matchWattHour('锂离子电池 YXE 4641113 3.7V 3000mAh 11.1Wh')).toBe(11.1)
      expect(matchWattHour('电动自行车 mkz-bicielec18n（内置锂电池组 BF4818 48V 18Ah 864Wh）')).toBe(864)
      expect(matchWattHour('可替换锂离子工具电池 BL1855 18V 5500MAh 99Wh')).toBe(99)
      expect(matchWattHour('八爪鱼风扇 T003（内置可充电锂离子电芯 IMR14500-500mAh 3.7V 500mAh 1.85Wh）')).toBe(1.85)
      expect(matchWattHour('手电筒 T1423（内置可充电锂离子电池 18650-3200 3.6V 3000mAh 10.8Wh）')).toBe(10.8)
      expect(matchWattHour('摄影灯 amaran Ace 25x (内置锂离子电池组 HCC21700-2S1P-L01 7.4V 4500mAh 33.3Wh)')).toBe(33.3)
      expect(matchWattHour('锂电池组 BL2512 7.2V 2400mAh 17.28Wh')).toBe(17.28)
      expect(matchWattHour('摄影灯 amaran Ace 25c (内置锂离子电池组 HCC21700-2S1P-L01 7.4V 4500mAh 33.3Wh)')).toBe(33.3)
      expect(matchWattHour('车载电子香薰 Verde Essence 4（内置锂离子电池 HSX 18500 3.7V 1500mAh 5.55Wh）')).toBe(5.55)
      expect(matchWattHour('锂离子电池 XKY 902040 3.7V 700mAh 2.59Wh')).toBe(2.59)
      expect(matchWattHour('无线电池笔 DIVA（内置聚合物锂离子电池 MS 142052P 3.7V 1800mAh 6.66Wh）')).toBe(6.66)
      expect(matchWattHour('无线电池笔 LOLA AIR PRO（内置聚合物锂离子电池 MS 142052P 3.7V 1800mAh 6.66Wh）')).toBe(6.66)
      expect(matchWattHour('热敏打印机 MP2（内置锂离子聚合物电池 143048 7.4V 1000mAh 7.4Wh）')).toBe(7.4)
      expect(matchWattHour('可充电锂离子电芯 443879PPM 3.87V 2240mAh 8.7Wh')).toBe(8.7)
      expect(matchWattHour('真无线立体声耳机充电盒 EDF200170 1.3Wh（与真无线立体声耳机 EDF200170 包装在一起）')).toBe(1.3)
      expect(matchWattHour('飞利浦颈部按摩器 PPM3502（内置锂离子电池 18650-2S 7.4V 2500mAh 18.5Wh）')).toBe(18.5)
      expect(matchWattHour('锂离子电池组 WT-18650-11.1V2600mAh 10.8V 2550mAh 27.54Wh')).toBe(27.54)
      expect(matchWattHour('便携式红外热成像仪 P3 Plus（内置可充锂离子电池 HD603065 3.7V 1500mAh 5.55Wh）')).toBe(5.55)
      expect(matchWattHour('便携储能电源 YPB-RS1200 1024Wh')).toBe(1024)
      expect(matchWattHour('儿童电动滑步车 DP-T12（KB09）（内置锂离子电池 JT-ESB06-14 21.6V 2500mAh 54Wh）')).toBe(54)
      expect(matchWattHour('平板电脑 Tab P8（内置锂离子聚合物电池 JY308590 3.7V 2500mAh 9.25Wh）')).toBe(9.25)
      expect(matchWattHour('麦克风音箱 1194140（内置锂离子电池 18650 3.7V 1200mAh 4.44Wh）')).toBe(4.44)
      expect(matchWattHour('游戏手柄 PG-SW097B（内置锂离子聚合物电池 603040 3.7V 600mAh 2.22Wh）')).toBe(2.22)
      expect(matchWattHour('手柄式热成像仪 LY-AS20 HD（内置可充锂离子电池 HD18650 3.7V 2000mAh 7.4Wh）')).toBe(7.4)
      expect(matchWattHour('麦克风 1194140（内置锂离子电池 14500 3.7V 300mAh 1.11Wh）')).toBe(1.11)
      expect(matchWattHour('智能手表 T45F (内置锂离子电池 AB 552022 3.8V 250mAh 0.95Wh) ')).toBe(0.95)
      expect(matchWattHour('太阳能草坪灯 HELIA（内置磷酸铁锂电池 YLY12824H 12.8V 24Ah 307.2Wh）')).toBe(307.2)
      expect(matchWattHour('汽车应急启动电源 C120/120 118.4Wh')).toBe(118.4)
      expect(matchWattHour('锂离子电芯 HC-L305B 3.2V 305Ah 976Wh')).toBe(976)
      expect(matchWattHour('可充电锂离子电池组 HLP2403G 3.85V 3850mAh 14.82Wh（与移动手机 Cascabel 包装在一起）')).toBe(14.82)
      expect(matchWattHour('C20便携式冲牙器 usmile C20（内置可充电锂离子电池 U642079P 3.7V 1100mAh 4.07Wh）')).toBe(4.07)
      expect(matchWattHour('便携式储能电源 YPB-RS600 409.6Wh')).toBe(409.6)
      expect(matchWattHour('锂离子电池 HY 555575 3.7V 3000mAh 11.1Wh')).toBe(11.1)
      expect(matchWattHour('锂聚合物电池 BP4012 3.85V 4000mAh 15.4Wh')).toBe(15.4)
      expect(matchWattHour('移动电源 DE-C66-10000 37Wh')).toBe(37)
      expect(matchWattHour('圆柱锂离子电芯 INR21700E4500 3.7V 4500mAh 16.65Wh')).toBe(16.65)
      expect(matchWattHour('圆柱锂离子电芯 INR21700E4500 3.7V 4500mAh 16.65Wh')).toBe(16.65)
      expect(matchWattHour('VAPORLINQ 一次性电子烟 PUFF BAR（内置锂离子电芯 13400 3.7V 550mAh 2.04Wh）')).toBe(2.04)
      expect(matchWattHour('VAPORLINQ 一次性电子烟 PUFF BAR（内置锂离子电芯 13400 3.7V 550mAh 2.04Wh）')).toBe(2.04)
      expect(matchWattHour('心电图机 ECG-903A（内置锂离子电池 18650-4S1P 14.8V 2600mAh 38.48Wh）')).toBe(38.48)
      expect(matchWattHour('18650电池组FE01 3.75V 6400mAh 24Wh (与手持式拉曼分析仪Finder-Edge-1064包装在一起)')).toBe(24)
      expect(matchWattHour('手持式拉曼分析仪Finder-Edge-1064 (内置18650电池组FE01 3.75V 6400mAh 24Wh)')).toBe(24)
      expect(matchWattHour('锂离子电池组 XY 383050 11.1V 1900mAh 21.09Wh')).toBe(21.09)
      expect(matchWattHour('充气泵 W8049（内置锂离子电池 INR18650 1800mAh 7.4V 13.32Wh）')).toBe(13.32)
      expect(matchWattHour('便携式无线路由器 U10N（内置锂离子电池 Li3820T44P4h665055 3.8V 2000mAh 7.6Wh） ')).toBe(7.6)
      expect(matchWattHour('可充电聚合物锂离子电芯 1260110 3.7V 10000mAh 37Wh')).toBe(37)
      expect(matchWattHour('TWS 充电盒 Air Neo 1.11Wh（与无线耳机 Air Neo 包装在一起）')).toBe(1.11)
      expect(matchWattHour('VUSE 一次性电子烟 VUSE GO（内置可充式锂离子电芯 EVE13350CS 3.7V 515mAh 1.91Wh）')).toBe(1.91)
      expect(matchWattHour('VUSE 一次性电子烟 VUSE GO（内置可充式锂离子电芯 EVE13350CS 3.7V 515mAh 1.91Wh）')).toBe(1.91)
      expect(matchWattHour('无线键盘带皮套 TTCCMIP109 (内置可充电锂离子电池 TW 323450 3.7V 500mAh 1.85Wh)')).toBe(1.85)
      expect(matchWattHour('锂离子电池 802022 3.7V 300mAh 1.11Wh')).toBe(1.11)
      expect(matchWattHour('移动电源 M320 74Wh')).toBe(74)
      expect(matchWattHour('电动工具锂电池包 LB2600 18V 2.6Ah 46.8Wh (与锂电扳手 BLW320包装在一起)')).toBe(46.8)
      expect(matchWattHour('智能手机 TA-1658（内置可充式锂离子电池组 HBA5033AA 3.87V 4900mAh 18.97Wh）')).toBe(18.97)
      expect(matchWattHour('智能手机 TA-1643（内置可充式锂离子电池组 HBA5033AA 3.87V 4900mAh 18.97Wh）')).toBe(18.97)
      expect(matchWattHour('智能手机 TA-1640（内置可充式锂离子电池组 HBA5033AA 3.87V 4900mAh 18.97Wh）')).toBe(18.97)
      expect(matchWattHour('数码望远镜 NV4-8X40（内置锂离子可充电电池 NCA21700T 3.6V 5000mAh 18.0Wh）')).toBe(18)
      expect(matchWattHour('锂离子电池 581013 3.7V 50mAh 0.185Wh')).toBe(0.185)
      expect(matchWattHour('倍思 S1 Pro 户外摄像头 S0SU00（内置可充电锂离子电池组 B0876 3.65V 13200mAh 48.18Wh)')).toBe(48.18)
      expect(matchWattHour('ELARI 4G 儿童手表 4G-W (内置聚合物锂离子电池 612726 3.8V 605mAh 2.30Wh)')).toBe(2.3)
      expect(matchWattHour('智能手机 TA-1670（内置可充式锂离子电池组 HBA5033AA 3.87V 4900mAh 18.97Wh）')).toBe(18.97)
      expect(matchWattHour('电子秤 EFS-E661-WUS（内置聚合物锂离子电池 602030 3.7V 300mAh 1.11Wh）')).toBe(1.11)
      expect(matchWattHour('SALT 一次性电子烟 CRISTALLITE（内置锂离子电芯 13300 3.7V 350mAh 1.295Wh）')).toBe(1.295)
      expect(matchWattHour('暴力风扇 X3-M（内置锂离子电池 21700 4000mAh 7.4V 29.6Wh）')).toBe(29.6)
      expect(matchWattHour('锂离子电芯 YZT 112038 3.7V 800mAh 2.96Wh')).toBe(2.96)
      expect(matchWattHour('电子秤 EFS-E661-KUS（内置聚合物锂离子电池 602030 3.7V 300mAh 1.11Wh）')).toBe(1.11)
      expect(matchWattHour('锂离子电芯 YZT 12300 3.7V 320mAh 1.184Wh')).toBe(1.184)
      expect(matchWattHour('智能锂聚合物电池RTX-DR08P 18.5Wh')).toBe(18.5)
      expect(matchWattHour('可充电锂离子电芯 123345 3.85V 2500mAh 9.625Wh')).toBe(9.625)
      expect(matchWattHour('XP4 平板电脑 XP4（内置锂离子电池 XP4 3.7V 2200mAh 8.14Wh）')).toBe(8.14)
      expect(matchWattHour('锂离子电池 XP4 3.7V 2200mAh 8.14Wh')).toBe(8.14)
      expect(matchWattHour('POS 终端 S300（内置可充电锂离子电池 SX18650-2S1P 7.2V 2600mAh 18.72Wh）')).toBe(18.72)
      expect(matchWattHour('锂离子电芯 PL 101933 3.7V 490mAh 1.81Wh')).toBe(1.81)
      expect(matchWattHour('自主移动机器人 KMP 600i-2.5-5G diffDrive（内置磷酸铁锂电池组 KGKUKA-002 (15S1P) 48V 24Ah 1152Wh）')).toBe(1152)
      expect(matchWattHour('自主移动机器人 KMP 600i-2.5 diffDrive（内置磷酸铁锂电池组 KGKUKA-002 (15S1P) 48V 24Ah 1152Wh）')).toBe(1152)
      expect(matchWattHour('锂离子电池 X-style 351 Lider 3.7V 3400mAh 12.60Wh（与移动手机 X-style 351 Lider包装在一起）')).toBe(12.6)
      expect(matchWattHour('可充电锂离子电池 TW 323450 3.7V 500mAh 1.85Wh')).toBe(1.85)
      expect(matchWattHour('锂离子电池组 DZ48N-24ES 48V 24Ah 1152Wh')).toBe(1152)
      expect(matchWattHour('锂离子电池组 FM-1304-2900 48V 11.6Ah 556.8Wh')).toBe(556.8)
      expect(matchWattHour('自主移动机器人 KMP 600i-1.3-5G diffDrive（内置磷酸铁锂电池组 KGKUKA-002 (15S1P) 48V 24Ah 1152Wh）')).toBe(1152)
      expect(matchWattHour('SALT 一次性电子烟 CRISTALLITE（内置锂离子电芯 13300 3.7V 350mAh 1.295Wh）')).toBe(1.295)
      expect(matchWattHour('锂离子电芯 861437 3.7V 420mAh 1.554Wh')).toBe(1.554)
      expect(matchWattHour('自主移动机器人 KMP 600i-1.3 diffDrive（内置磷酸铁锂电池组 KGKUKA-002 (15S1P) 48V 24Ah 1152Wh）')).toBe(1152)
      expect(matchWattHour('智能眼镜 LCD008-10（内置锂离子聚合物电池 501430 3.7V 180mAh 0.67Wh）')).toBe(0.67)
      expect(matchWattHour('可充电锂离子电池 GEA80001S13D5 3.8V 8000mAh 30.4Wh')).toBe(30.4)
      expect(matchWattHour('电动咖啡研磨器 KMDJ-5C（内置锂离子电池 18650 3.7V 1800mAh 6.66Wh）')).toBe(6.66)
      expect(matchWattHour('电动咖啡研磨器 KMDJ-4AW（内置锂离子电池 18650 3.7V 1800mAh 6.66Wh）')).toBe(6.66)
      expect(matchWattHour('无线蓝牙耳机 A3062（内置可充电锂离子电池 M391840 3.85V 350mAh 1.348Wh）')).toBe(1.348)
      expect(matchWattHour('电动咖啡研磨器 KMDJ-4A（内置锂离子电池 18650 3.7V 1800mAh 6.66Wh）')).toBe(6.66)
      expect(matchWattHour('移动电源 PB-40002 37Wh')).toBe(37)
      expect(matchWattHour('可充电锂离子电池 GEA80001S14D5 3.8V 8000mAh 30.4Wh')).toBe(30.4)
      expect(matchWattHour('电动咖啡研磨器 KMDJ-2AW（内置锂离子电池 18650 3.7V 1800mAh 6.66Wh）')).toBe(6.66)
      expect(matchWattHour('笔记本电脑 DN39-140H2-YD-R02（内置可充式锂离子电池组 685380 11.61V 5167mAh 60Wh）')).toBe(60)
      expect(matchWattHour('笔记本电脑 N23J2（内置可充式锂离子电池组 685380 11.61V 5167mAh 60Wh）')).toBe(60)
      expect(matchWattHour('锂离子电池 OAK 18650-2000mAh 3.7V 7.4Wh')).toBe(7.4)
      expect(matchWattHour('笔记本电脑 E140（内置聚合物锂离子电池 5075140 7.74V 4500mAh 34.83Wh）')).toBe(34.83)
      expect(matchWattHour('锂离子电池 751355 3.7V 500mAh 1.85Wh ')).toBe(1.85)
      expect(matchWattHour('Tweeze-it 夹具设备 Tweeze-it（内置锂离子电芯 16340 3.7V 700mAh 2.59Wh）')).toBe(2.59)
      expect(matchWattHour('电动咖啡研磨器 KMDJ-3AW（内置锂离子电池 18650 3.7V 1800mAh 6.66Wh）')).toBe(6.66)
      expect(matchWattHour('汽车诊断扫描仪 NT1009（内置可充电锂离子电池 PL 824577-2P 3.7V 8000mAh 29.6Wh）')).toBe(29.6)
      expect(matchWattHour('锂离子电池 ICR18650 7.4V 13400mAh 99.16Wh')).toBe(99.16)
      expect(matchWattHour('平板电脑 TE10D1M64（内置可充式锂离子电池 FHPV316492L-2P 3.85V 6000mAh 23.10Wh）')).toBe(23.1)
      expect(matchWattHour('锂离子电池 1205000 11.1V 5Ah 55.5Wh')).toBe(55.5)
      expect(matchWattHour('TUGBOAT 一次性电子烟 T12000（内置锂离子电芯 Miyear 102230 3.7V 600mAh 2.22Wh）')).toBe(2.22)
      expect(matchWattHour('移动数据终端 CT37-X0N（内置可充式锂离子电池组 341322PM4 3.85V 85mAh 0.328Wh）')).toBe(0.328)
      expect(matchWattHour('汽车诊断扫描仪 NT909（内置可充电锂离子电池 PL 824577-2P 3.7V 8000mAh 29.6Wh）')).toBe(29.6)
      expect(matchWattHour('锂离子电池 D3-CB 1.5V 800mAh 1.2Wh')).toBe(1.2)
      expect(matchWattHour('锂离子电芯 36130200-100 3.2V 100Ah 320Wh')).toBe(320)
      expect(matchWattHour('移动数据终端 CT37-X0N（内置可充式锂离子电池组 341322PM4 3.85V 85mAh 0.328Wh）')).toBe(0.328)
      expect(matchWattHour('锂离子电芯 123031 3.7V 1000mAh 3.7Wh')).toBe(3.7)
      expect(matchWattHour('锂离子可充电电芯 ICR 18650 3.7V 3000mAh 11.1Wh')).toBe(11.1)
    })

    it('应正确处理不同单位和大小写', () => {
      expect(matchWattHour('设备 100 wh 电池')).toBe(100)
      expect(matchWattHour('设备 2 kWh 电池')).toBe(2000)
      expect(matchWattHour('设备 1000 mWh 电池')).toBe(1)
      expect(matchWattHour('设备 0.5 KWH 电池')).toBe(500)
    })

    it('应返回最后一个匹配项', () => {
      expect(matchWattHour('电池 20 Wh 和 40 Wh')).toBe(40)
    })

    it('应处理无效输入', () => {
      expect(matchWattHour('无瓦时数据')).toBe(0)
      expect(matchWattHour('')).toBe(0)
    })
  })

  // matchVoltage 测试
  describe('matchVoltage', () => {
    it('应正确匹配基本电压值', () => {
      expect(matchVoltage('可充电锂离子电池 112570 3.85V 58mAh 0.224Wh')).toBe(3.85)
      expect(matchVoltage('剃须刀 30-00159-W（内置锂离子聚合物电池 622560 3.7V 1080mAh 3.996Wh）')).toBe(3.7)
      expect(matchVoltage('整合型核酸分析仪 PM001 Ultra（内置MS锂充电电池 MS621FE 3.0V 5.5mAh 0.0165Wh）')).toBe(3)
      expect(matchVoltage('可充式锂离子电池组 CT37-BTSC 3.87V Rated:3735mAh 14.46Wh TYP:3846mAh 14.89Wh（与移动数据终端 CT37-X1N 包装在一起）')).toBe(3.87)
      expect(matchVoltage('移动数据终端 CT37-X1N（内置可充式锂离子电池组 341322PM4 3.85V 85mAh 0.328Wh）')).toBe(3.85)
      expect(matchVoltage('可充电锂离子电芯 INR18650-2600 3.6V 2600mAh 9.36Wh')).toBe(3.6)
      expect(matchVoltage('分光相机 DVC-45（内置聚合物锂电池 JH 103035 3.7V 2200mAh 8.14Wh）')).toBe(3.7)
      expect(matchVoltage('机械键盘 RK-S98（内置锂离子电池 5543120 3.7V 3750mAh 13.875Wh）')).toBe(3.7)
      expect(matchVoltage('可充电锂离子电池 406282 3.7V 3000mAh 11.1Wh')).toBe(3.7)
      expect(matchVoltage('移动数据终端 CT37-X1N（内置可充式锂离子电池组 341322PM4 3.85V 85mAh 0.328Wh）')).toBe(3.85)
      expect(matchVoltage('多功能美容仪 MCB011 (内置圆柱锂电池 18650 3.7V 2000mAh 7.4Wh)')).toBe(3.7)
      expect(matchVoltage('机械键盘 RK-M75（内置锂离子电池 5543120 3.7V 3750mAh 13.875Wh）')).toBe(3.7)
      expect(matchVoltage('太阳能三防灯 AI-X2200（内置磷酸铁锂电池 YLY12812 12.8V 12Ah 153.6Wh）')).toBe(12.8)
      expect(matchVoltage('锂离子电池\锂离子充电电池芯\锂离子电池芯\锂电池\锂电电池芯\锂电芯\锂聚合物电芯\可充电锂离子聚合物电芯 CA405067-W 3.69V 2000mAh 7.38Wh')).toBe(3.69)
      expect(matchVoltage('可充式锂离子电池组 CT37-BTSC 3.87V Rated:3735mAh 14.46Wh TYP:3846mAh 14.89Wh（与移动数据终端 CT37-X1N 包装在一起）')).toBe(3.87)
      expect(matchVoltage('船载追踪器 Siren 3（内置锂二氧化锰一次电芯 CR17450L 3.0V 2400mAh）')).toBe(3)
      expect(matchVoltage('船载追踪器 Siren 3（内置锂二氧化锰一次电芯 CR17450L 3.0V 2400mAh）')).toBe(3)
      expect(matchVoltage('机械键盘 RK-H81（内置锂离子电池 5543120 3.7V 3750mAh 13.875Wh）')).toBe(3.7)
      expect(matchVoltage('机械键盘 RK100（内置锂离子电池 5543120 3.7V 3750mAh 13.875Wh）')).toBe(3.7)
      expect(matchVoltage('锂离子聚合物电池 30100103 3.7V 4000mAh 14.8Wh')).toBe(3.7)
      expect(matchVoltage('机械键盘 RK96（内置锂离子电池 5543120 3.7V 3750mAh 13.875Wh）')).toBe(3.7)
      expect(matchVoltage('锂离子电芯 KY13500 3.7V 800mAh 2.96Wh')).toBe(3.7)
      expect(matchVoltage('电子狗项圈 Halo Collar 4（内置可充电锂离子电池组 GRP812050 3.8V 860mAh 3.268Wh）')).toBe(3.8)
      expect(matchVoltage('TATA 5G 通信模块 PRO L263 8732706（内置二次鋰電池組 4111619 3.2V 1.6Ah 5.12Wh）')).toBe(3.2)
      expect(matchVoltage('TATA 5G 通信模块 LITE L262 8732705（内置二次鋰電池組 4111619 3.2V 1.6Ah 5.12Wh）')).toBe(3.2)
      expect(matchVoltage('蓝牙键盘保护套 THZ967US-50（内置锂离子聚合物电池 TW 304355 3.7V 750mAh 2.775Wh）')).toBe(3.7)
      expect(matchVoltage('蓝牙耳机 ANW03MGO（内置锂聚合物电池 EN602030 3.7V 300mAh 1.11Wh）')).toBe(3.7)
      expect(matchVoltage('锂离子电池 CLY702030 3.7V 350mAh 1.295Wh')).toBe(3.7)
      expect(matchVoltage('磷酸铁锂电池 YLY12836H 12.8V 36Ah 460.8Wh')).toBe(12.8)
      expect(matchVoltage('电动自行车 mkz-tricielecneg（内置锂电池组 BF4815 48V 15Ah 720Wh）')).toBe(48)
      expect(matchVoltage('锂离子电池 IC-48V27-HP 48V 27Ah 1296Wh')).toBe(48)
      expect(matchVoltage('锂离子电芯 KLP 12350 3.7V 400mAh 1.48Wh')).toBe(3.7)
      expect(matchVoltage('锂离子电池 IC-36V27-HP 36V 27Ah 972Wh')).toBe(36)
      expect(matchVoltage('锂离子电池 551138 3.7V 200mAh 0.74Wh')).toBe(3.7)
      expect(matchVoltage('美容仪 DSF-1000（内置聚合物锂离子电池 JC 102050 3.7V 1000mAh 3.7Wh）')).toBe(3.7)
      expect(matchVoltage('手电筒 T1420（内置可充电锂离子电池 18650-3200 3.6V 3000mAh 10.8Wh）')).toBe(3.6)
      expect(matchVoltage('锂离子电池 YXE 4641113 3.7V 3000mAh 11.1Wh')).toBe(3.7)
      expect(matchVoltage('电动自行车 mkz-bicielec18n（内置锂电池组 BF4818 48V 18Ah 864Wh）')).toBe(48)
      expect(matchVoltage('可替换锂离子工具电池 BL1855 18V 5500MAh 99Wh')).toBe(18)
      expect(matchVoltage('八爪鱼风扇 T003（内置可充电锂离子电芯 IMR14500-500mAh 3.7V 500mAh 1.85Wh）')).toBe(3.7)
      expect(matchVoltage('手电筒 T1423（内置可充电锂离子电池 18650-3200 3.6V 3000mAh 10.8Wh）')).toBe(3.6)
      expect(matchVoltage('摄影灯 amaran Ace 25x (内置锂离子电池组 HCC21700-2S1P-L01 7.4V 4500mAh 33.3Wh)')).toBe(7.4)
      expect(matchVoltage('锂电池组 BL2512 7.2V 2400mAh 17.28Wh')).toBe(7.2)
      expect(matchVoltage('摄影灯 amaran Ace 25c (内置锂离子电池组 HCC21700-2S1P-L01 7.4V 4500mAh 33.3Wh)')).toBe(7.4)
      expect(matchVoltage('车载电子香薰 Verde Essence 4（内置锂离子电池 HSX 18500 3.7V 1500mAh 5.55Wh）')).toBe(3.7)
      expect(matchVoltage('锂离子电池 XKY 902040 3.7V 700mAh 2.59Wh')).toBe(3.7)
      expect(matchVoltage('无线电池笔 DIVA（内置聚合物锂离子电池 MS 142052P 3.7V 1800mAh 6.66Wh）')).toBe(3.7)
      expect(matchVoltage('无线电池笔 LOLA AIR PRO（内置聚合物锂离子电池 MS 142052P 3.7V 1800mAh 6.66Wh）')).toBe(3.7)
      expect(matchVoltage('热敏打印机 MP2（内置锂离子聚合物电池 143048 7.4V 1000mAh 7.4Wh）')).toBe(7.4)
      expect(matchVoltage('可充电锂离子电芯 443879PPM 3.87V 2240mAh 8.7Wh')).toBe(3.87)
      expect(matchVoltage('飞利浦颈部按摩器 PPM3502（内置锂离子电池 18650-2S 7.4V 2500mAh 18.5Wh）')).toBe(7.4)
      expect(matchVoltage('锂离子电池组 WT-18650-11.1V2600mAh 10.8V 2550mAh 27.54Wh')).toBe(10.8)
      expect(matchVoltage('便携式红外热成像仪 P3 Plus（内置可充锂离子电池 HD603065 3.7V 1500mAh 5.55Wh）')).toBe(3.7)
      expect(matchVoltage('儿童电动滑步车 DP-T12（KB09）（内置锂离子电池 JT-ESB06-14 21.6V 2500mAh 54Wh）')).toBe(21.6)
      expect(matchVoltage('平板电脑 Tab P8（内置锂离子聚合物电池 JY308590 3.7V 2500mAh 9.25Wh）')).toBe(3.7)
      expect(matchVoltage('麦克风音箱 1194140（内置锂离子电池 18650 3.7V 1200mAh 4.44Wh）')).toBe(3.7)
      expect(matchVoltage('游戏手柄 PG-SW097B（内置锂离子聚合物电池 603040 3.7V 600mAh 2.22Wh）')).toBe(3.7)
      expect(matchVoltage('手柄式热成像仪 LY-AS20 HD（内置可充锂离子电池 HD18650 3.7V 2000mAh 7.4Wh）')).toBe(3.7)
      expect(matchVoltage('锂锰扣式电芯 CR3032 3.0V 580mAh')).toBe(3)
      expect(matchVoltage('麦克风 1194140（内置锂离子电池 14500 3.7V 300mAh 1.11Wh）')).toBe(3.7)
      expect(matchVoltage('智能手表 T45F (内置锂离子电池 AB 552022 3.8V 250mAh 0.95Wh) ')).toBe(3.8)
      expect(matchVoltage('太阳能草坪灯 HELIA（内置磷酸铁锂电池 YLY12824H 12.8V 24Ah 307.2Wh）')).toBe(12.8)
      expect(matchVoltage('锂离子电芯 HC-L305B 3.2V 305Ah 976Wh')).toBe(3.2)
      expect(matchVoltage('可充电锂离子电池组 HLP2403G 3.85V 3850mAh 14.82Wh（与移动手机 Cascabel 包装在一起）')).toBe(3.85)
      expect(matchVoltage('C20便携式冲牙器 usmile C20（内置可充电锂离子电池 U642079P 3.7V 1100mAh 4.07Wh）')).toBe(3.7)
      expect(matchVoltage('锂离子电池 HY 555575 3.7V 3000mAh 11.1Wh')).toBe(3.7)
      expect(matchVoltage('锂聚合物电池 BP4012 3.85V 4000mAh 15.4Wh')).toBe(3.85)
      expect(matchVoltage('圆柱锂离子电芯 INR21700E4500 3.7V 4500mAh 16.65Wh')).toBe(3.7)
      expect(matchVoltage('圆柱锂离子电芯 INR21700E4500 3.7V 4500mAh 16.65Wh')).toBe(3.7)
      expect(matchVoltage('提词器 TC7 遥控器（内置锂锰扣式电池 CR2025 3.0V 160mAh）')).toBe(3)
      expect(matchVoltage('VAPORLINQ 一次性电子烟 PUFF BAR（内置锂离子电芯 13400 3.7V 550mAh 2.04Wh）')).toBe(3.7)
      expect(matchVoltage('VAPORLINQ 一次性电子烟 PUFF BAR（内置锂离子电芯 13400 3.7V 550mAh 2.04Wh）')).toBe(3.7)
      expect(matchVoltage('心电图机 ECG-903A（内置锂离子电池 18650-4S1P 14.8V 2600mAh 38.48Wh）')).toBe(14.8)
      expect(matchVoltage('18650电池组FE01 3.75V 6400mAh 24Wh (与手持式拉曼分析仪Finder-Edge-1064包装在一起)')).toBe(3.75)
      expect(matchVoltage('手持式拉曼分析仪Finder-Edge-1064 (内置18650电池组FE01 3.75V 6400mAh 24Wh)')).toBe(3.75)
      expect(matchVoltage('锂离子电池组 XY 383050 11.1V 1900mAh 21.09Wh')).toBe(11.1)
      expect(matchVoltage('LTE/WCDMA/GSM(GPRS) 多模数字移动电话机 Z2460（内置锂离子聚合物电池 Li3949T44P8h906450 3.85V 4870mAh 18.75Wh（Rated）/5000mAh 19.25Wh（Typical））')).toBe(3.85)
      expect(matchVoltage('充气泵 W8049（内置锂离子电池 INR18650 1800mAh 7.4V 13.32Wh）')).toBe(7.4)
      expect(matchVoltage('便携式无线路由器 U10N（内置锂离子电池 Li3820T44P4h665055 3.8V 2000mAh 7.6Wh） ')).toBe(3.8)
      expect(matchVoltage('可充电聚合物锂离子电芯 1260110 3.7V 10000mAh 37Wh')).toBe(3.7)
      expect(matchVoltage('VUSE 一次性电子烟 VUSE GO（内置可充式锂离子电芯 EVE13350CS 3.7V 515mAh 1.91Wh）')).toBe(3.7)
      expect(matchVoltage('VUSE 一次性电子烟 VUSE GO（内置可充式锂离子电芯 EVE13350CS 3.7V 515mAh 1.91Wh）')).toBe(3.7)
      expect(matchVoltage('无线键盘带皮套 TTCCMIP109 (内置可充电锂离子电池 TW 323450 3.7V 500mAh 1.85Wh)')).toBe(3.7)
      expect(matchVoltage('锂离子电池 802022 3.7V 300mAh 1.11Wh')).toBe(3.7)
      expect(matchVoltage('电动工具锂电池包 LB2600 18V 2.6Ah 46.8Wh (与锂电扳手 BLW320包装在一起)')).toBe(18)
      expect(matchVoltage('智能手机 TA-1658（内置可充式锂离子电池组 HBA5033AA 3.87V 4900mAh 18.97Wh）')).toBe(3.87)
      expect(matchVoltage('智能手机 TA-1643（内置可充式锂离子电池组 HBA5033AA 3.87V 4900mAh 18.97Wh）')).toBe(3.87)
      expect(matchVoltage('智能手机 TA-1640（内置可充式锂离子电池组 HBA5033AA 3.87V 4900mAh 18.97Wh）')).toBe(3.87)
      expect(matchVoltage('数码望远镜 NV4-8X40（内置锂离子可充电电池 NCA21700T 3.6V 5000mAh 18.0Wh）')).toBe(3.6)
      expect(matchVoltage('锂离子电池 581013 3.7V 50mAh 0.185Wh')).toBe(3.7)
      expect(matchVoltage('倍思 S1 Pro 户外摄像头 S0SU00（内置可充电锂离子电池组 B0876 3.65V 13200mAh 48.18Wh)')).toBe(3.65)
      expect(matchVoltage('ELARI 4G 儿童手表 4G-W (内置聚合物锂离子电池 612726 3.8V 605mAh 2.30Wh)')).toBe(3.8)
      expect(matchVoltage('智能手机 TA-1670（内置可充式锂离子电池组 HBA5033AA 3.87V 4900mAh 18.97Wh）')).toBe(3.87)
      expect(matchVoltage('电子秤 EFS-E661-WUS（内置聚合物锂离子电池 602030 3.7V 300mAh 1.11Wh）')).toBe(3.7)
      expect(matchVoltage('SALT 一次性电子烟 CRISTALLITE（内置锂离子电芯 13300 3.7V 350mAh 1.295Wh）')).toBe(3.7)
      expect(matchVoltage('暴力风扇 X3-M（内置锂离子电池 21700 4000mAh 7.4V 29.6Wh）')).toBe(7.4)
      expect(matchVoltage('锂离子电芯 YZT 112038 3.7V 800mAh 2.96Wh')).toBe(3.7)
      expect(matchVoltage('电子秤 EFS-E661-KUS（内置聚合物锂离子电池 602030 3.7V 300mAh 1.11Wh）')).toBe(3.7)
      expect(matchVoltage('锂离子电芯 YZT 12300 3.7V 320mAh 1.184Wh')).toBe(3.7)
      expect(matchVoltage('锂-亚硫酰氯电池组 ER34615H-2+ER34615M 3.6V')).toBe(3.6)
      expect(matchVoltage('可充电锂离子电芯 123345 3.85V 2500mAh 9.625Wh')).toBe(3.85)
      expect(matchVoltage('XP4 平板电脑 XP4（内置锂离子电池 XP4 3.7V 2200mAh 8.14Wh）')).toBe(3.7)
      expect(matchVoltage('锂离子电池 XP4 3.7V 2200mAh 8.14Wh')).toBe(3.7)
      expect(matchVoltage('POS 终端 S300（内置可充电锂离子电池 SX18650-2S1P 7.2V 2600mAh 18.72Wh）')).toBe(7.2)
      expect(matchVoltage('POS 终端 S300（内置锂-二氧化锰电池 CR2430 3V 300mAh）')).toBe(3)
      expect(matchVoltage('锂离子电芯 PL 101933 3.7V 490mAh 1.81Wh')).toBe(3.7)
      expect(matchVoltage('自主移动机器人 KMP 600i-2.5-5G diffDrive（内置磷酸铁锂电池组 KGKUKA-002 (15S1P) 48V 24Ah 1152Wh）')).toBe(48)
      expect(matchVoltage('自主移动机器人 KMP 600i-2.5 diffDrive（内置磷酸铁锂电池组 KGKUKA-002 (15S1P) 48V 24Ah 1152Wh）')).toBe(48)
      expect(matchVoltage('锂离子电池 X-style 351 Lider 3.7V 3400mAh 12.60Wh（与移动手机 X-style 351 Lider包装在一起）')).toBe(3.7)
      expect(matchVoltage('可充电锂离子电池 TW 323450 3.7V 500mAh 1.85Wh')).toBe(3.7)
      expect(matchVoltage('锂离子电池组 DZ48N-24ES 48V 24Ah 1152Wh')).toBe(48)
      expect(matchVoltage('锂离子电池组 FM-1304-2900 48V 11.6Ah 556.8Wh')).toBe(48)
      expect(matchVoltage('自主移动机器人 KMP 600i-1.3-5G diffDrive（内置磷酸铁锂电池组 KGKUKA-002 (15S1P) 48V 24Ah 1152Wh）')).toBe(48)
      expect(matchVoltage('SALT 一次性电子烟 CRISTALLITE（内置锂离子电芯 13300 3.7V 350mAh 1.295Wh）')).toBe(3.7)
      expect(matchVoltage('锂离子电芯 861437 3.7V 420mAh 1.554Wh')).toBe(3.7)
      expect(matchVoltage('自主移动机器人 KMP 600i-1.3 diffDrive（内置磷酸铁锂电池组 KGKUKA-002 (15S1P) 48V 24Ah 1152Wh）')).toBe(48)
      expect(matchVoltage('智能眼镜 LCD008-10（内置锂离子聚合物电池 501430 3.7V 180mAh 0.67Wh）')).toBe(3.7)
      expect(matchVoltage('可充电锂离子电池 GEA80001S13D5 3.8V 8000mAh 30.4Wh')).toBe(3.8)
      expect(matchVoltage('电动咖啡研磨器 KMDJ-5C（内置锂离子电池 18650 3.7V 1800mAh 6.66Wh）')).toBe(3.7)
      expect(matchVoltage('锂电池 CR3032 3.0V 580mAh')).toBe(3)
      expect(matchVoltage('电动咖啡研磨器 KMDJ-4AW（内置锂离子电池 18650 3.7V 1800mAh 6.66Wh）')).toBe(3.7)
      expect(matchVoltage('无线蓝牙耳机 A3062（内置可充电锂离子电池 M391840 3.85V 350mAh 1.348Wh）')).toBe(3.85)
      expect(matchVoltage('电动咖啡研磨器 KMDJ-4A（内置锂离子电池 18650 3.7V 1800mAh 6.66Wh）')).toBe(3.7)
      expect(matchVoltage('可充电锂离子电池 GEA80001S14D5 3.8V 8000mAh 30.4Wh')).toBe(3.8)
      expect(matchVoltage('电动咖啡研磨器 KMDJ-2AW（内置锂离子电池 18650 3.7V 1800mAh 6.66Wh）')).toBe(3.7)
      expect(matchVoltage('笔记本电脑 DN39-140H2-YD-R02（内置可充式锂离子电池组 685380 11.61V 5167mAh 60Wh）')).toBe(11.61)
      expect(matchVoltage('笔记本电脑 N23J2（内置可充式锂离子电池组 685380 11.61V 5167mAh 60Wh）')).toBe(11.61)
      expect(matchVoltage('标签定位器 BS-LB-01 (内置锂-二氧化锰电池 CP305050 3.0V 1800mAh)')).toBe(3)
      expect(matchVoltage('锂离子电池 OAK 18650-2000mAh 3.7V 7.4Wh')).toBe(3.7)
      expect(matchVoltage('笔记本电脑 E140（内置聚合物锂离子电池 5075140 7.74V 4500mAh 34.83Wh）')).toBe(7.74)
      expect(matchVoltage('锂离子电池 751355 3.7V 500mAh 1.85Wh ')).toBe(3.7)
      expect(matchVoltage('Tweeze-it 夹具设备 Tweeze-it（内置锂离子电芯 16340 3.7V 700mAh 2.59Wh）')).toBe(3.7)
      expect(matchVoltage('电动咖啡研磨器 KMDJ-3AW（内置锂离子电池 18650 3.7V 1800mAh 6.66Wh）')).toBe(3.7)
      expect(matchVoltage('汽车诊断扫描仪 NT1009（内置可充电锂离子电池 PL 824577-2P 3.7V 8000mAh 29.6Wh）')).toBe(3.7)
      expect(matchVoltage('锂离子电池 ICR18650 7.4V 13400mAh 99.16Wh')).toBe(7.4)
      expect(matchVoltage('平板电脑 TE10D1M64（内置可充式锂离子电池 FHPV316492L-2P 3.85V 6000mAh 23.10Wh）')).toBe(3.85)
      expect(matchVoltage('锂离子电池 1205000 11.1V 5Ah 55.5Wh')).toBe(11.1)
      expect(matchVoltage('可充式锂离子电池组 CT37-BTSC 3.87V Rated:3735mAh 14.46Wh TYP:3846mAh 14.89Wh（与移动数据终端 CT37-X0N 包装在一起）')).toBe(3.87)
      expect(matchVoltage('TUGBOAT 一次性电子烟 T12000（内置锂离子电芯 Miyear 102230 3.7V 600mAh 2.22Wh）')).toBe(3.7)
      expect(matchVoltage('移动数据终端 CT37-X0N（内置可充式锂离子电池组 341322PM4 3.85V 85mAh 0.328Wh）')).toBe(3.85)
      expect(matchVoltage('汽车诊断扫描仪 NT909（内置可充电锂离子电池 PL 824577-2P 3.7V 8000mAh 29.6Wh）')).toBe(3.7)
      expect(matchVoltage('锂离子电池 D3-CB 1.5V 800mAh 1.2Wh')).toBe(1.5)
      expect(matchVoltage('锂离子电芯 36130200-100 3.2V 100Ah 320Wh')).toBe(3.2)
      expect(matchVoltage('移动数据终端 CT37-X0N（内置可充式锂离子电池组 341322PM4 3.85V 85mAh 0.328Wh）')).toBe(3.85)
      expect(matchVoltage('锂离子电芯 123031 3.7V 1000mAh 3.7Wh')).toBe(3.7)
      expect(matchVoltage('可充式锂离子电池组 CT37-BTSC 3.87V Rated:3735mAh 14.46Wh TYP:3846mAh 14.89Wh（与移动数据终端 CT37-X0N 包装在一起）')).toBe(3.87)
      expect(matchVoltage('锂离子可充电电芯 ICR 18650 3.7V 3000mAh 11.1Wh')).toBe(3.7)
    })

    it('应正确处理不同单位和大小写', () => {
      expect(matchVoltage('设备 5 v 电池')).toBe(5)
      expect(matchVoltage('设备 1 kV 电池')).toBe(1000)
      expect(matchVoltage('设备 100 mV 电池')).toBe(0.1)
      expect(matchVoltage('设备 0.5 KV 电池')).toBe(500)
    })

    it('应返回最后一个匹配项', () => {
      expect(matchVoltage('电池 3.7V 和 7.4V')).toBe(7.4)
    })

    it('应处理无效输入', () => {
      expect(matchVoltage('无电压数据')).toBe(0)
      expect(matchVoltage('')).toBe(0)
    })
  })

  // matchCapacity 测试
  describe('matchCapacity', () => {
    it('应正确匹配基本容量值', () => {
      expect(matchCapacity('可充电锂离子电池 112570 3.85V 58mAh 0.224Wh')).toBe(58)
      expect(matchCapacity('剃须刀 30-00159-W（内置锂离子聚合物电池 622560 3.7V 1080mAh 3.996Wh）')).toBe(1080)
      expect(matchCapacity('整合型核酸分析仪 PM001 Ultra（内置MS锂充电电池 MS621FE 3.0V 5.5mAh 0.0165Wh）')).toBe(5.5)
      expect(matchCapacity('移动数据终端 CT37-X1N（内置可充式锂离子电池组 341322PM4 3.85V 85mAh 0.328Wh）')).toBe(85)
      expect(matchCapacity('可充电锂离子电芯 INR18650-2600 3.6V 2600mAh 9.36Wh')).toBe(2600)
      expect(matchCapacity('分光相机 DVC-45（内置聚合物锂电池 JH 103035 3.7V 2200mAh 8.14Wh）')).toBe(2200)
      expect(matchCapacity('机械键盘 RK-S98（内置锂离子电池 5543120 3.7V 3750mAh 13.875Wh）')).toBe(3750)
      expect(matchCapacity('可充电锂离子电池 406282 3.7V 3000mAh 11.1Wh')).toBe(3000)
      expect(matchCapacity('移动数据终端 CT37-X1N（内置可充式锂离子电池组 341322PM4 3.85V 85mAh 0.328Wh）')).toBe(85)
      expect(matchCapacity('多功能美容仪 MCB011 (内置圆柱锂电池 18650 3.7V 2000mAh 7.4Wh)')).toBe(2000)
      expect(matchCapacity('机械键盘 RK-M75（内置锂离子电池 5543120 3.7V 3750mAh 13.875Wh）')).toBe(3750)
      expect(matchCapacity('太阳能三防灯 AI-X2200（内置磷酸铁锂电池 YLY12812 12.8V 12Ah 153.6Wh）')).toBe(12000)
      expect(matchCapacity('锂离子电池\锂离子充电电池芯\锂离子电池芯\锂电池\锂电电池芯\锂电芯\锂聚合物电芯\可充电锂离子聚合物电芯 CA405067-W 3.69V 2000mAh 7.38Wh')).toBe(2000)
      expect(matchCapacity('船载追踪器 Siren 3（内置锂二氧化锰一次电芯 CR17450L 3.0V 2400mAh）')).toBe(2400)
      expect(matchCapacity('船载追踪器 Siren 3（内置锂二氧化锰一次电芯 CR17450L 3.0V 2400mAh）')).toBe(2400)
      expect(matchCapacity('机械键盘 RK-H81（内置锂离子电池 5543120 3.7V 3750mAh 13.875Wh）')).toBe(3750)
      expect(matchCapacity('机械键盘 RK100（内置锂离子电池 5543120 3.7V 3750mAh 13.875Wh）')).toBe(3750)
      expect(matchCapacity('锂离子聚合物电池 30100103 3.7V 4000mAh 14.8Wh')).toBe(4000)
      expect(matchCapacity('机械键盘 RK96（内置锂离子电池 5543120 3.7V 3750mAh 13.875Wh）')).toBe(3750)
      expect(matchCapacity('锂离子电芯 KY13500 3.7V 800mAh 2.96Wh')).toBe(800)
      expect(matchCapacity('电子狗项圈 Halo Collar 4（内置可充电锂离子电池组 GRP812050 3.8V 860mAh 3.268Wh）')).toBe(860)
      expect(matchCapacity('TATA 5G 通信模块 PRO L263 8732706（内置二次鋰電池組 4111619 3.2V 1.6Ah 5.12Wh）')).toBe(1600)
      expect(matchCapacity('TATA 5G 通信模块 LITE L262 8732705（内置二次鋰電池組 4111619 3.2V 1.6Ah 5.12Wh）')).toBe(1600)
      expect(matchCapacity('蓝牙键盘保护套 THZ967US-50（内置锂离子聚合物电池 TW 304355 3.7V 750mAh 2.775Wh）')).toBe(750)
      expect(matchCapacity('蓝牙耳机 ANW03MGO（内置锂聚合物电池 EN602030 3.7V 300mAh 1.11Wh）')).toBe(300)
      expect(matchCapacity('锂离子电池 CLY702030 3.7V 350mAh 1.295Wh')).toBe(350)
      expect(matchCapacity('磷酸铁锂电池 YLY12836H 12.8V 36Ah 460.8Wh')).toBe(36000)
      expect(matchCapacity('电动自行车 mkz-tricielecneg（内置锂电池组 BF4815 48V 15Ah 720Wh）')).toBe(15000)
      expect(matchCapacity('锂离子电池 IC-48V27-HP 48V 27Ah 1296Wh')).toBe(27000)
      expect(matchCapacity('锂离子电芯 KLP 12350 3.7V 400mAh 1.48Wh')).toBe(400)
      expect(matchCapacity('锂离子电池 IC-36V27-HP 36V 27Ah 972Wh')).toBe(27000)
      expect(matchCapacity('锂离子电池 551138 3.7V 200mAh 0.74Wh')).toBe(200)
      expect(matchCapacity('美容仪 DSF-1000（内置聚合物锂离子电池 JC 102050 3.7V 1000mAh 3.7Wh）')).toBe(1000)
      expect(matchCapacity('手电筒 T1420（内置可充电锂离子电池 18650-3200 3.6V 3000mAh 10.8Wh）')).toBe(3000)
      expect(matchCapacity('锂离子电池 YXE 4641113 3.7V 3000mAh 11.1Wh')).toBe(3000)
      expect(matchCapacity('电动自行车 mkz-bicielec18n（内置锂电池组 BF4818 48V 18Ah 864Wh）')).toBe(18000)
      expect(matchCapacity('可替换锂离子工具电池 BL1855 18V 5500MAh 99Wh')).toBe(5500)
      expect(matchCapacity('八爪鱼风扇 T003（内置可充电锂离子电芯 IMR14500-500mAh 3.7V 500mAh 1.85Wh）')).toBe(500)
      expect(matchCapacity('手电筒 T1423（内置可充电锂离子电池 18650-3200 3.6V 3000mAh 10.8Wh）')).toBe(3000)
      expect(matchCapacity('摄影灯 amaran Ace 25x (内置锂离子电池组 HCC21700-2S1P-L01 7.4V 4500mAh 33.3Wh)')).toBe(4500)
      expect(matchCapacity('锂电池组 BL2512 7.2V 2400mAh 17.28Wh')).toBe(2400)
      expect(matchCapacity('摄影灯 amaran Ace 25c (内置锂离子电池组 HCC21700-2S1P-L01 7.4V 4500mAh 33.3Wh)')).toBe(4500)
      expect(matchCapacity('车载电子香薰 Verde Essence 4（内置锂离子电池 HSX 18500 3.7V 1500mAh 5.55Wh）')).toBe(1500)
      expect(matchCapacity('锂离子电池 XKY 902040 3.7V 700mAh 2.59Wh')).toBe(700)
      expect(matchCapacity('无线电池笔 DIVA（内置聚合物锂离子电池 MS 142052P 3.7V 1800mAh 6.66Wh）')).toBe(1800)
      expect(matchCapacity('无线电池笔 LOLA AIR PRO（内置聚合物锂离子电池 MS 142052P 3.7V 1800mAh 6.66Wh）')).toBe(1800)
      expect(matchCapacity('热敏打印机 MP2（内置锂离子聚合物电池 143048 7.4V 1000mAh 7.4Wh）')).toBe(1000)
      expect(matchCapacity('可充电锂离子电芯 443879PPM 3.87V 2240mAh 8.7Wh')).toBe(2240)
      expect(matchCapacity('飞利浦颈部按摩器 PPM3502（内置锂离子电池 18650-2S 7.4V 2500mAh 18.5Wh）')).toBe(2500)
      expect(matchCapacity('锂离子电池组 WT-18650-11.1V2600mAh 10.8V 2550mAh 27.54Wh')).toBe(2550)
      expect(matchCapacity('便携式红外热成像仪 P3 Plus（内置可充锂离子电池 HD603065 3.7V 1500mAh 5.55Wh）')).toBe(1500)
      expect(matchCapacity('儿童电动滑步车 DP-T12（KB09）（内置锂离子电池 JT-ESB06-14 21.6V 2500mAh 54Wh）')).toBe(2500)
      expect(matchCapacity('平板电脑 Tab P8（内置锂离子聚合物电池 JY308590 3.7V 2500mAh 9.25Wh）')).toBe(2500)
      expect(matchCapacity('麦克风音箱 1194140（内置锂离子电池 18650 3.7V 1200mAh 4.44Wh）')).toBe(1200)
      expect(matchCapacity('游戏手柄 PG-SW097B（内置锂离子聚合物电池 603040 3.7V 600mAh 2.22Wh）')).toBe(600)
      expect(matchCapacity('手柄式热成像仪 LY-AS20 HD（内置可充锂离子电池 HD18650 3.7V 2000mAh 7.4Wh）')).toBe(2000)
      expect(matchCapacity('锂锰扣式电芯 CR3032 3.0V 580mAh')).toBe(580)
      expect(matchCapacity('麦克风 1194140（内置锂离子电池 14500 3.7V 300mAh 1.11Wh）')).toBe(300)
      expect(matchCapacity('智能手表 T45F (内置锂离子电池 AB 552022 3.8V 250mAh 0.95Wh) ')).toBe(250)
      expect(matchCapacity('太阳能草坪灯 HELIA（内置磷酸铁锂电池 YLY12824H 12.8V 24Ah 307.2Wh）')).toBe(24000)
      expect(matchCapacity('锂离子电芯 HC-L305B 3.2V 305Ah 976Wh')).toBe(305000)
      expect(matchCapacity('可充电锂离子电池组 HLP2403G 3.85V 3850mAh 14.82Wh（与移动手机 Cascabel 包装在一起）')).toBe(3850)
      expect(matchCapacity('C20便携式冲牙器 usmile C20（内置可充电锂离子电池 U642079P 3.7V 1100mAh 4.07Wh）')).toBe(1100)
      expect(matchCapacity('锂离子电池 HY 555575 3.7V 3000mAh 11.1Wh')).toBe(3000)
      expect(matchCapacity('锂聚合物电池 BP4012 3.85V 4000mAh 15.4Wh')).toBe(4000)
      expect(matchCapacity('圆柱锂离子电芯 INR21700E4500 3.7V 4500mAh 16.65Wh')).toBe(4500)
      expect(matchCapacity('圆柱锂离子电芯 INR21700E4500 3.7V 4500mAh 16.65Wh')).toBe(4500)
      expect(matchCapacity('提词器 TC7 遥控器（内置锂锰扣式电池 CR2025 3.0V 160mAh）')).toBe(160)
      expect(matchCapacity('VAPORLINQ 一次性电子烟 PUFF BAR（内置锂离子电芯 13400 3.7V 550mAh 2.04Wh）')).toBe(550)
      expect(matchCapacity('VAPORLINQ 一次性电子烟 PUFF BAR（内置锂离子电芯 13400 3.7V 550mAh 2.04Wh）')).toBe(550)
      expect(matchCapacity('心电图机 ECG-903A（内置锂离子电池 18650-4S1P 14.8V 2600mAh 38.48Wh）')).toBe(2600)
      expect(matchCapacity('18650电池组FE01 3.75V 6400mAh 24Wh (与手持式拉曼分析仪Finder-Edge-1064包装在一起)')).toBe(6400)
      expect(matchCapacity('手持式拉曼分析仪Finder-Edge-1064 (内置18650电池组FE01 3.75V 6400mAh 24Wh)')).toBe(6400)
      expect(matchCapacity('锂离子电池组 XY 383050 11.1V 1900mAh 21.09Wh')).toBe(1900)
      expect(matchCapacity('充气泵 W8049（内置锂离子电池 INR18650 1800mAh 7.4V 13.32Wh）')).toBe(1800)
      expect(matchCapacity('便携式无线路由器 U10N（内置锂离子电池 Li3820T44P4h665055 3.8V 2000mAh 7.6Wh） ')).toBe(2000)
      expect(matchCapacity('可充电聚合物锂离子电芯 1260110 3.7V 10000mAh 37Wh')).toBe(10000)
      expect(matchCapacity('VUSE 一次性电子烟 VUSE GO（内置可充式锂离子电芯 EVE13350CS 3.7V 515mAh 1.91Wh）')).toBe(515)
      expect(matchCapacity('VUSE 一次性电子烟 VUSE GO（内置可充式锂离子电芯 EVE13350CS 3.7V 515mAh 1.91Wh）')).toBe(515)
      expect(matchCapacity('无线键盘带皮套 TTCCMIP109 (内置可充电锂离子电池 TW 323450 3.7V 500mAh 1.85Wh)')).toBe(500)
      expect(matchCapacity('锂离子电池 802022 3.7V 300mAh 1.11Wh')).toBe(300)
      expect(matchCapacity('电动工具锂电池包 LB2600 18V 2.6Ah 46.8Wh (与锂电扳手 BLW320包装在一起)')).toBe(2600)
      expect(matchCapacity('智能手机 TA-1658（内置可充式锂离子电池组 HBA5033AA 3.87V 4900mAh 18.97Wh）')).toBe(4900)
      expect(matchCapacity('智能手机 TA-1643（内置可充式锂离子电池组 HBA5033AA 3.87V 4900mAh 18.97Wh）')).toBe(4900)
      expect(matchCapacity('智能手机 TA-1640（内置可充式锂离子电池组 HBA5033AA 3.87V 4900mAh 18.97Wh）')).toBe(4900)
      expect(matchCapacity('数码望远镜 NV4-8X40（内置锂离子可充电电池 NCA21700T 3.6V 5000mAh 18.0Wh）')).toBe(5000)
      expect(matchCapacity('锂离子电池 581013 3.7V 50mAh 0.185Wh')).toBe(50)
      expect(matchCapacity('倍思 S1 Pro 户外摄像头 S0SU00（内置可充电锂离子电池组 B0876 3.65V 13200mAh 48.18Wh)')).toBe(13200)
      expect(matchCapacity('ELARI 4G 儿童手表 4G-W (内置聚合物锂离子电池 612726 3.8V 605mAh 2.30Wh)')).toBe(605)
      expect(matchCapacity('智能手机 TA-1670（内置可充式锂离子电池组 HBA5033AA 3.87V 4900mAh 18.97Wh）')).toBe(4900)
      expect(matchCapacity('电子秤 EFS-E661-WUS（内置聚合物锂离子电池 602030 3.7V 300mAh 1.11Wh）')).toBe(300)
      expect(matchCapacity('SALT 一次性电子烟 CRISTALLITE（内置锂离子电芯 13300 3.7V 350mAh 1.295Wh）')).toBe(350)
      expect(matchCapacity('暴力风扇 X3-M（内置锂离子电池 21700 4000mAh 7.4V 29.6Wh）')).toBe(4000)
      expect(matchCapacity('锂离子电芯 YZT 112038 3.7V 800mAh 2.96Wh')).toBe(800)
      expect(matchCapacity('电子秤 EFS-E661-KUS（内置聚合物锂离子电池 602030 3.7V 300mAh 1.11Wh）')).toBe(300)
      expect(matchCapacity('锂离子电芯 YZT 12300 3.7V 320mAh 1.184Wh')).toBe(320)
      expect(matchCapacity('可充电锂离子电芯 123345 3.85V 2500mAh 9.625Wh')).toBe(2500)
      expect(matchCapacity('XP4 平板电脑 XP4（内置锂离子电池 XP4 3.7V 2200mAh 8.14Wh）')).toBe(2200)
      expect(matchCapacity('锂离子电池 XP4 3.7V 2200mAh 8.14Wh')).toBe(2200)
      expect(matchCapacity('POS 终端 S300（内置可充电锂离子电池 SX18650-2S1P 7.2V 2600mAh 18.72Wh）')).toBe(2600)
      expect(matchCapacity('POS 终端 S300（内置锂-二氧化锰电池 CR2430 3V 300mAh）')).toBe(300)
      expect(matchCapacity('锂离子电芯 PL 101933 3.7V 490mAh 1.81Wh')).toBe(490)
      expect(matchCapacity('自主移动机器人 KMP 600i-2.5-5G diffDrive（内置磷酸铁锂电池组 KGKUKA-002 (15S1P) 48V 24Ah 1152Wh）')).toBe(24000)
      expect(matchCapacity('自主移动机器人 KMP 600i-2.5 diffDrive（内置磷酸铁锂电池组 KGKUKA-002 (15S1P) 48V 24Ah 1152Wh）')).toBe(24000)
      expect(matchCapacity('锂离子电池 X-style 351 Lider 3.7V 3400mAh 12.60Wh（与移动手机 X-style 351 Lider包装在一起）')).toBe(3400)
      expect(matchCapacity('可充电锂离子电池 TW 323450 3.7V 500mAh 1.85Wh')).toBe(500)
      expect(matchCapacity('锂离子电池组 DZ48N-24ES 48V 24Ah 1152Wh')).toBe(24000)
      expect(matchCapacity('锂离子电池组 FM-1304-2900 48V 11.6Ah 556.8Wh')).toBe(11600)
      expect(matchCapacity('自主移动机器人 KMP 600i-1.3-5G diffDrive（内置磷酸铁锂电池组 KGKUKA-002 (15S1P) 48V 24Ah 1152Wh）')).toBe(24000)
      expect(matchCapacity('SALT 一次性电子烟 CRISTALLITE（内置锂离子电芯 13300 3.7V 350mAh 1.295Wh）')).toBe(350)
      expect(matchCapacity('锂离子电芯 861437 3.7V 420mAh 1.554Wh')).toBe(420)
      expect(matchCapacity('自主移动机器人 KMP 600i-1.3 diffDrive（内置磷酸铁锂电池组 KGKUKA-002 (15S1P) 48V 24Ah 1152Wh）')).toBe(24000)
      expect(matchCapacity('智能眼镜 LCD008-10（内置锂离子聚合物电池 501430 3.7V 180mAh 0.67Wh）')).toBe(180)
      expect(matchCapacity('可充电锂离子电池 GEA80001S13D5 3.8V 8000mAh 30.4Wh')).toBe(8000)
      expect(matchCapacity('电动咖啡研磨器 KMDJ-5C（内置锂离子电池 18650 3.7V 1800mAh 6.66Wh）')).toBe(1800)
      expect(matchCapacity('锂电池 CR3032 3.0V 580mAh')).toBe(580)
      expect(matchCapacity('电动咖啡研磨器 KMDJ-4AW（内置锂离子电池 18650 3.7V 1800mAh 6.66Wh）')).toBe(1800)
      expect(matchCapacity('无线蓝牙耳机 A3062（内置可充电锂离子电池 M391840 3.85V 350mAh 1.348Wh）')).toBe(350)
      expect(matchCapacity('电动咖啡研磨器 KMDJ-4A（内置锂离子电池 18650 3.7V 1800mAh 6.66Wh）')).toBe(1800)
      expect(matchCapacity('可充电锂离子电池 GEA80001S14D5 3.8V 8000mAh 30.4Wh')).toBe(8000)
      expect(matchCapacity('电动咖啡研磨器 KMDJ-2AW（内置锂离子电池 18650 3.7V 1800mAh 6.66Wh）')).toBe(1800)
      expect(matchCapacity('笔记本电脑 DN39-140H2-YD-R02（内置可充式锂离子电池组 685380 11.61V 5167mAh 60Wh）')).toBe(5167)
      expect(matchCapacity('笔记本电脑 N23J2（内置可充式锂离子电池组 685380 11.61V 5167mAh 60Wh）')).toBe(5167)
      expect(matchCapacity('标签定位器 BS-LB-01 (内置锂-二氧化锰电池 CP305050 3.0V 1800mAh)')).toBe(1800)
      expect(matchCapacity('锂离子电池 OAK 18650-2000mAh 3.7V 7.4Wh')).toBe(2000)
      expect(matchCapacity('笔记本电脑 E140（内置聚合物锂离子电池 5075140 7.74V 4500mAh 34.83Wh）')).toBe(4500)
      expect(matchCapacity('锂离子电池 751355 3.7V 500mAh 1.85Wh ')).toBe(500)
      expect(matchCapacity('Tweeze-it 夹具设备 Tweeze-it（内置锂离子电芯 16340 3.7V 700mAh 2.59Wh）')).toBe(700)
      expect(matchCapacity('电动咖啡研磨器 KMDJ-3AW（内置锂离子电池 18650 3.7V 1800mAh 6.66Wh）')).toBe(1800)
      expect(matchCapacity('汽车诊断扫描仪 NT1009（内置可充电锂离子电池 PL 824577-2P 3.7V 8000mAh 29.6Wh）')).toBe(8000)
      expect(matchCapacity('锂离子电池 ICR18650 7.4V 13400mAh 99.16Wh')).toBe(13400)
      expect(matchCapacity('平板电脑 TE10D1M64（内置可充式锂离子电池 FHPV316492L-2P 3.85V 6000mAh 23.10Wh）')).toBe(6000)
      expect(matchCapacity('锂离子电池 1205000 11.1V 5Ah 55.5Wh')).toBe(5000)
      expect(matchCapacity('TUGBOAT 一次性电子烟 T12000（内置锂离子电芯 Miyear 102230 3.7V 600mAh 2.22Wh）')).toBe(600)
      expect(matchCapacity('移动数据终端 CT37-X0N（内置可充式锂离子电池组 341322PM4 3.85V 85mAh 0.328Wh）')).toBe(85)
      expect(matchCapacity('汽车诊断扫描仪 NT909（内置可充电锂离子电池 PL 824577-2P 3.7V 8000mAh 29.6Wh）')).toBe(8000)
      expect(matchCapacity('锂离子电池 D3-CB 1.5V 800mAh 1.2Wh')).toBe(800)
      expect(matchCapacity('锂离子电芯 36130200-100 3.2V 100Ah 320Wh')).toBe(100000)
      expect(matchCapacity('移动数据终端 CT37-X0N（内置可充式锂离子电池组 341322PM4 3.85V 85mAh 0.328Wh）')).toBe(85)
      expect(matchCapacity('锂离子电芯 123031 3.7V 1000mAh 3.7Wh')).toBe(1000)
      expect(matchCapacity('锂离子可充电电芯 ICR 18650 3.7V 3000mAh 11.1Wh')).toBe(3000)
    })

    it('应正确处理不同单位和大小写', () => {
      expect(matchCapacity('设备 3000 mah 电池')).toBe(3000)
      expect(matchCapacity('设备 5 Ah 电池')).toBe(5000)
      expect(matchCapacity('设备 0.5 kAh 电池')).toBe(500000)
      expect(matchCapacity('设备 2 MAH 电池')).toBe(2)
    })

    it('应返回最后一个匹配项', () => {
      expect(matchCapacity('电池 1000mAh 和 2000mAh')).toBe(2000)
    })

    it('应处理无效输入', () => {
      expect(matchCapacity('无容量数据')).toBe(0)
      expect(matchCapacity('')).toBe(0)
    })
  })

  // matchBatteryWeight 测试
  describe('matchBatteryWeight', () => {
    it('应正确匹配基本重量值', () => {
      expect(matchBatteryWeight(`（注：单个蓝牙耳机充电盒的重量约为41.0g。摩托罗拉主动降噪蓝牙耳机型号：MOTO BUDS-S ANC，内置1块可充电锂离子电芯 LIR1254，电池额定瓦特小时为 0.222Wh，单块电池的 重量为1.9g，锂离子电池符合包装说明967第II部分。每个充电盒与一对耳机合包在一个零售包装内，整个包装件内含40个充电盒和80个耳机电池，包装件内锂电池总净重为1.792kg。）`)).toBe(41)
      expect(matchBatteryWeight(`（注：单块电芯的重量约为1.14g。）`)).toBe(1.14)
      expect(matchBatteryWeight(`（注：该电池已经做好防短路措施并已采取防止意外启动措施。单块电池的净重约为18.2g。设备：剃须刀；型号：30-00159-W。每台设备内置1块电池，每包装件内含6台设备。）`)).toBe(18.2)
      expect(matchBatteryWeight(`（注：该电芯已经做好防短路措施并已采取防止意外启动措施。单块电芯的重量约为0.2547g。设备：整合型核酸分析仪；型号：PM001 Ultra。每台设备内置1块电芯，每包装件内含1台设备。)`)).toBe(0.2547)
      expect(matchBatteryWeight(`（注：单块电池的重量约为82.6g。设备：移动数据终端；型号：CT37-X1N。每台设备与1块电池包装在一起，每包装件内含20台设备。该包装件另含可充式锂离子电池组 341322PM4。该包装件内锂电池总净重为1.693kg）`)).toBe(82.6)
      expect(matchBatteryWeight(`（注：该电池已经做好防短路措施并已采取防止意外启动措施。单块电池的重量约为2.041g。设备：移动数据终端；型号：CT37-X1N。每台设备内置1块电池，每包装件内含20台设备 。该包装件另含可充式锂离子电池组 CT37-BTSC。该包装件内锂电池总净重为1.693kg)`)).toBe(2.041)
      expect(matchBatteryWeight(`（注：单块电芯的重量约为43.2g。）`)).toBe(43.2)
      expect(matchBatteryWeight(`（注：该电池已经做好防短路措施并已采取防止意外启动措施。单块电池的重量约为39.5g。设备：分光相机；型号：DVC-45。每台设备内置1块电池，每包装件内含10台设备。)`)).toBe(39.5)
      expect(matchBatteryWeight(`（注：该电池已经做好防短路措施并已采取防止意外启动措施。单块电池的净重约为63.5g。设备：机械键盘；型号：RK-S98。每台设备内置1块电池，每包装件内含10台设备。）`)).toBe(63.5)
      expect(matchBatteryWeight(`（注：单块电池的重量约为52.3g。）`)).toBe(52.3)
      expect(matchBatteryWeight(`（注：该电池已经做好防短路措施并已采取防止意外启动措施。单块电池的重量约为2.041g。设备：移动数据终端；型号：CT37-X1N。每台设备内置1块电池，每包装件内含20台设备 。该包装件另含可充式锂离子电池组 CT37-BTSC。该包装件内锂电池总净重为1.693kg)`)).toBe(2.041)
      expect(matchBatteryWeight(`（注：该电池已经做好防短路措施并已采取防止意外启动措施。单块电池的净重约为46.2g。设备：多功能美容仪；型号：MCB011。每台设备内置1块电池，每包装件内含10台设备。）`)).toBe(46.2)
      expect(matchBatteryWeight(`（注：该电池已经做好防短路措施并已采取防止意外启动措施。单块电池的净重约为63.5g。设备：机械键盘；型号：RK-M75。每台设备内置1块电池，每包装件内含10台设备。）`)).toBe(63.5)
      expect(matchBatteryWeight(`（注：该电池已经做好防短路措施并已采取防止意外启动措施。单块电池的重量约为1192.1g。设备：太阳能三防灯；型号：AI-X2200。每台设备内置1块电池，每包装件内含1台设备 。)`)).toBe(1192.1)
      expect(matchBatteryWeight(`（注：单块电芯的重量约为29.479g。）`)).toBe(29.479)
      expect(matchBatteryWeight(`（注：单块电池的重量约为29.77kg。）`)).toBe(29770)
      expect(matchBatteryWeight(`（注：单块电池的重量约为406.4g。）`)).toBe(406.4)
      expect(matchBatteryWeight(`（注：单块电池的重量约为82.6g。设备：移动数据终端；型号：CT37-X1N。每台设备与1块电池包装在一起，每包装件内含20台设备。该包装件另含可充式锂离子电池组 341322PM4。该包装件内锂电池总净重为1.693kg）`)).toBe(82.6)
      expect(matchBatteryWeight(`（注：该电芯已经做好防短路措施并已采取防止意外启动措施。单块电芯的重量约为24.8g。设备：船载追踪器；型号：Siren 3。每台设备内置电芯4块，每个包装件内含10台设备。)`)).toBe(24.8)
      expect(matchBatteryWeight(`（注：该电芯已经做好防短路措施并已采取防止意外启动措施。单块电芯的重量约为24.8g。设备：船载追踪器；型号：Siren 3。每台设备内置电芯4块，每个包装件内含10台设备。)`)).toBe(24.8)
      expect(matchBatteryWeight(`（注：该电池已经做好防短路措施并已采取防止意外启动措施。单块电池的净重约为63.5g。设备：机械键盘；型号：RK-H81。每台设备内置1块电池，每包装件内含10台设备。）`)).toBe(63.5)
      expect(matchBatteryWeight(`（注：该电池已经做好防短路措施并已采取防止意外启动措施。单块电池的净重约为63.5g。设备：机械键盘；型号：RK100。每台设备内置1块电池，每包装件内含10台设备。）`)).toBe(63.5)
      expect(matchBatteryWeight(`（注：单块电池的重量约为9.064kg。）`)).toBe(9064)
      expect(matchBatteryWeight(`(注：单块电池重量约为74.9g。)`)).toBe(74.9)
      expect(matchBatteryWeight(`(注：单块电池重量约为117.3g。)`)).toBe(117.3)
      expect(matchBatteryWeight(`（注：该电池已经做好防短路措施并已采取防止意外启动措施。单块电池的净重约为63.5g。设备：机械键盘；型号：RK96。每台设备内置1块电池，每包装件内含10台设备。）`)).toBe(63.5)
      expect(matchBatteryWeight(`（注：单块电芯的重量约为14.55g。）`)).toBe(14.55)
      expect(matchBatteryWeight(`（注：该电池已经做好防短路措施并已采取防止意外启动措施。单块电池的重量约为14.7g。设备：电子狗项圈；型号：Halo Collar 4。每台设备内置1块电池，每包装件内含18台设 备。)`)).toBe(14.7)
      expect(matchBatteryWeight(`（注：该电芯已经做好防短路措施并已采取防止意外启动措施。单块电芯的重量约为45.527g。设备：TATA 5G 通信模块 PRO L263；型号：8732706；商标：Harman。每台设备内置1块电芯，每包装件内含18台设备。)`)).toBe(45.527)
      expect(matchBatteryWeight(`（注：该电芯已经做好防短路措施并已采取防止意外启动措施。单块电芯的重量约为45.527g。设备：TATA 5G 通信模块 LITE L262；型号：8732705；商标：Harman。每台设备内置1 块电芯，每包装件内含18台设备。)`)).toBe(45.527)
      expect(matchBatteryWeight(`（注：该电池已经做好防短路措施并已采取防止意外启动措施。单块电池的重量约为15g。设备：蓝牙键盘保护套；型号：THZ967US-50；商标：Targus。每台设备内置1块电池，每包 装件内含10台设备。)`)).toBe(15)
      expect(matchBatteryWeight(`（注：该电池已经做好防短路措施并已采取防止意外启动措施。单块电池的净重约为6.74g。设备：蓝牙耳机；型号：ANW03MGO；商标：ANIMA。每台设备内置1块电池，每包装件内含10台设备。）`)).toBe(6.74)
      expect(matchBatteryWeight(`(注：单块电池重量约为7.50g。)`)).toBe(7.5)
      expect(matchBatteryWeight(`（注：单块电池的重量约为4.47kg。）`)).toBe(4470)
      expect(matchBatteryWeight(`（注：该电池已经做好防短路措施并已采取防止意外启动措施。单块电池的净重约为3960g。设备：电动自行车；型号：mkz-tricielecneg；商标：E-BE。每台设备内置1块电池，每包装件内含1台设备。）`)).toBe(3960)
      expect(matchBatteryWeight(`(注：单块电池的重量约为225.93g。)`)).toBe(225.93)
      expect(matchBatteryWeight(`（注：单块电池的重量约为13.08kg。）`)).toBe(13080)
      expect(matchBatteryWeight(`（注：单块电芯的重量约为8.67g。）`)).toBe(8.67)
      expect(matchBatteryWeight(`（注：单块电池的重量约为10.83kg。）`)).toBe(10830)
      expect(matchBatteryWeight(`(注：单块电池重量约为4.05g。)`)).toBe(4.05)
      expect(matchBatteryWeight(`（注：该电池已经做好防短路措施并已采取防止意外启动措施。单块电池的重量约为18.2g。设备：美容仪；型号：DSF-1000；商标：Ruby-Cell。每台设备内置1块电池，每包装件内 含20台设备。)`)).toBe(18.2)
      expect(matchBatteryWeight(`（注：该电池已经做好防短路措施并已采取防止意外启动措施。单块电池的净重约为49.75g。设备：手电筒；型号：T1420；商标：ANKER。每台设备内置1块电池，每包装件内含25台 设备。）`)).toBe(49.75)
      expect(matchBatteryWeight(`（注：单块电池的重量约为51.7g。)`)).toBe(51.7)
      expect(matchBatteryWeight(`（注：该电池已经做好防短路措施并已采取防止意外启动措施。单块电池的净重约为4995g。设备：电动自行车；型号：mkz-bicielec18n。每台设备内置1块电池，每包装件内含1台设备。）`)).toBe(4995)
      expect(matchBatteryWeight(`（注：单块电池的重量约为622.4g。）`)).toBe(622.4)
      expect(matchBatteryWeight(`（注：该电芯已经做好防短路措施并已采取防止意外启动措施。单块电芯的重量约为16.668g。设备：八爪鱼风扇；型号：T003。每台设备内置1块电芯，每包装件内含100台设备。)`)).toBe(16.668)
      expect(matchBatteryWeight(`（注：该电池已经做好防短路措施并已采取防止意外启动措施。单块电池的净重约为50g。设备：手电筒；型号：T1423；商标：ANKER。每台设备内置1块电池，每包装件内含70台设备。）`)).toBe(50)
      expect(matchBatteryWeight(`（注：该电池已经做好防短路措施并已采取防止意外启动措施。单块电池的重量约为143.95g。设备：摄影灯；型号：amaran Ace 25x。每台设备内置1块电池，每包装件内含20台设备。）`)).toBe(143.95)
      expect(matchBatteryWeight(`(注：单块电池的净重约为135.8g。）`)).toBe(135.8)
      expect(matchBatteryWeight(`（注：该电池已经做好防短路措施并已采取防止意外启动措施。单块电池的重量约为143.95g。设备：摄影灯；型号：amaran Ace 25c。每台设备内置1块电池，每包装件内含20台设备。）`)).toBe(143.95)
      expect(matchBatteryWeight(`（注：该电池已经做好防短路措施并已采取防止意外启动措施。单块电池的重量约为36.85g。设备：车载电子香薰；型号：Verde Essence 4。每台设备内置1块电池，每包装件内含24台设备。)`)).toBe(36.85)
      expect(matchBatteryWeight(`（注：单块电池的重量约为12.6g。）`)).toBe(12.6)
      expect(matchBatteryWeight(`（注：该电池已经做好防短路措施并已采取防止意外启动措施。单块电池的重量约为29.3g。设备：无线电池笔；型号：DIVA；商标：POPU。每台设备内置1块电池，每包装件内含27台设备。)`)).toBe(29.3)
      expect(matchBatteryWeight(`（注：该电池已经做好防短路措施并已采取防止意外启动措施。单块电池的重量约为29.3g。设备：无线电池笔；型号：LOLA AIR PRO；商标：EZ TATTOO。每台设备内置1块电池，每 包装件内含30台设备。)`)).toBe(29.3)
      expect(matchBatteryWeight(`（注：该电池已经做好防短路措施并已采取防止意外启动措施。单块电池的重量约为41.9g。设备：热敏打印机；型号：MP2。每台设备内置1块电池，每包装件内含60台设备。）`)).toBe(41.9)
      expect(matchBatteryWeight(`（注：单块电芯的重量约为29.9g。）`)).toBe(29.9)
      expect(matchBatteryWeight(`（注：单个真无线立体声耳机充电盒的重量约为34.277g。真无线立体声耳机型号：EDF200170，内置1块聚合物锂离子电芯 WEL 451012，电芯额定瓦特小时为0.14Wh，单块电芯的重量为0.77g，锂离子电芯符合包装说明967第II部分。每个充电盒与一对耳机合包在一个零售包装内，整个包装件内含80个充电盒和160个耳机电芯，包装件内锂电池总净重为2.88kg。)`)).toBe(34.277)
      expect(matchBatteryWeight(`（注：该电池已经做好防短路措施并已采取防止意外启动措施。单块电池的重量约为96.7g。设备：飞利浦颈部按摩器；型号：PPM3502。每台设备内置1块电池，每包装件内含10台设 备。）`)).toBe(96.7)
      expect(matchBatteryWeight(`（注：单块电池的重量约为145.0g。)`)).toBe(145)
      expect(matchBatteryWeight(`（注：该电池已经做好防短路措施并已采取防止意外启动措施。单块电池重量为22.79g。设备：便携式红外热成像仪；型号：P3 Plus。每台设备内置1块电池，每包装件内含4台设备 。）`)).toBe(22.79)
      expect(matchBatteryWeight(`（注：单块电池的重量约为16052g。）`)).toBe(16052)
      expect(matchBatteryWeight(`（注：该电池已经做好防短路措施并已采取防止意外启动措施。单块电池的净重约为385.7g。设备：儿童电动滑步车；型号：DP-T12（KB09）。每台设备内置1块电池，每包装件内含1台设备。）`)).toBe(385.7)
      expect(matchBatteryWeight(`（注：该电池已经做好防短路措施并已采取防止意外启动措施。单块电池的重量约为50.4g。设备：平板电脑；型号：Tab P8。每台设备内置1块电池，每包装件内含20台设备。)     `)).toBe(50.4)
      expect(matchBatteryWeight(`（注：该电池已经做好防短路措施并已采取防止意外启动措施。单块电池的重量约为37.28g。设备：麦克风音箱；型号：1194140。每台设备内置1块电池，每包装件内含6台设备。该 包装件另含锂离子电池 14500，该包装件中锂电池总净重为0.32kg。）
实际物品运输时需进行磁性检测。`)).toBe(37.28)
      expect(matchBatteryWeight(`（注：该电池已经做好防短路措施并已采取防止意外启动措施。单块电池的重量约为13.5g。设备：游戏手柄；型号：PG-SW097B。每台设备内置1块电池，每包装件内含20台设备。)  `)).toBe(13.5)
      expect(matchBatteryWeight(`（注：该电池已经做好防短路措施并已采取防止意外启动措施。单块电池重量为39.74g。设备：手柄式热成像仪；型号：LY-AS20 HD。每台设备内置2块电池，每包装件内含6台设备。）`)).toBe(39.74)
      expect(matchBatteryWeight(`（注：单块电芯的重量约为6.7948g。）`)).toBe(6.7948)
      expect(matchBatteryWeight(`（注：该电池已经做好防短路措施并已采取防止意外启动措施。单块电池的重量约为15.45g。设备：麦克风；型号：1194140。每台设备内置1块电池，每包装件内含6台设备。该包装 件另含锂离子电池 18650，该包装件中锂电池总净重为0.32kg。)
实际物品运输时需进行磁性检测。`)).toBe(15.45)
      expect(matchBatteryWeight(`（注：该电池已经做好防短路措施并已采取防止意外启动措施。单块电池的重量约为4.28g。设备：智能手表；型号：T45F。每台设备内置1块电池，每包装件内含100台设备。)`)).toBe(4.28)
      expect(matchBatteryWeight(`（注：该电池已经做好防短路措施并已采取防止意外启动措施。单块电池的重量约为2.43kg。设备：太阳能草坪灯；型号：HELIA。每台设备内置1块电池，每包装件内含1台设备。）`)).toBe(2430)
      expect(matchBatteryWeight(`（注：单块电池的重量约为1757.9g。）`)).toBe(1757.9)
      expect(matchBatteryWeight(`（注：单块电芯的重量约为5.58kg。）`)).toBe(5580)
      expect(matchBatteryWeight(`（注：单块电池的重量约为66.24g。设备：移动手机；型号：Cascabel。每台设备与1块电池包装在一起，每包装件内含20台设备。）`)).toBe(66.24)
      expect(matchBatteryWeight(`（注：该电池已经做好防短路措施并已采取防止意外启动措施。单块电池的重量约为20.8g。设备：C20便携式冲牙器；型号：usmile C20。每台设备内置1块电池，每包装件内含24台 设备。)`)).toBe(20.8)
      expect(matchBatteryWeight(`（注：单块电池的重量约为7.266kg。）`)).toBe(7266)
      expect(matchBatteryWeight(`（注：单块电池的重量约为51.3g。）`)).toBe(51.3)
      expect(matchBatteryWeight(`(注：单块电池重量约为67.185g。)`)).toBe(67.185)
      expect(matchBatteryWeight(`(注：单块电池的重量约为225.93g。)`)).toBe(225.93)
      expect(matchBatteryWeight(`（注：单块电芯的重量约为67.9g。）`)).toBe(67.9)
      expect(matchBatteryWeight(`（注：单块电芯的重量约为67.9g。）`)).toBe(67.9)
      expect(matchBatteryWeight(`（注：该电芯已经做好防短路措施并已采取防止意外启动措施。单块电芯的重量约为2.33g。设备：提词器 TC7 遥控器。每台设备内置电芯1块，每包装件内含12台设备。）`)).toBe(2.33)
      expect(matchBatteryWeight(`（注：该电芯已经做好防短路措施并已采取防止意外启动措施。单块电芯的重量约为11.0g。设备：一次性电子烟；型号：PUFF BAR；商标：VAPORLINQ。每台设备内置1块电芯，每包 装件内含400台设备。该产品内含2mL烟油（COLA 可乐 1个口味，尼古丁含量为20mg/mL），该烟油完全吸附于白色吸附棉中，无游离液体，烟油不受本规则限制。)`)).toBe(11)
      expect(matchBatteryWeight(`（注：该电芯已经做好防短路措施并已采取防止意外启动措施。单块电芯的重量约为11.0g。设备：一次性电子烟；型号：PUFF BAR；商标：VAPORLINQ。每台设备内置1块电芯，每包 装件内含400台设备。该产品内含2mL烟油（BLUE RAZZ ICE 蓝树莓冰/STRAWBERRY ICE 草莓冰/MENTHOL 薄荷醇，共3个口味，尼古丁含量为20mg/mL），该烟油完全吸附于白色吸附棉中，无游离液体，烟油不受本规则限制。)`)).toBe(11)
      expect(matchBatteryWeight(`（注：该电池已经做好防短路措施并已采取防止意外启动措施。单块电池的重量约为191.4g。设备：心电图机；型号：ECG-903A。每台设备内置1块电池，每包装件内含2台设备。）`)).toBe(191.4)
      expect(matchBatteryWeight(`（注：单块电池的重量约为237g。设备：手持式拉曼分析仪；型号：Finder-Edge-1064。每台设备与1块电池包装在一起，每包装件内含1台设备。该包装件另含18650电池组 FE01。该包装件内锂电池总净重为0.474kg）`)).toBe(237)
      expect(matchBatteryWeight(`（注：该电池已经做好防短路措施并已采取防止意外启动措施。单块电池的重量约为237g。设备：手持式拉曼分析仪；型号：Finder-Edge-1064。该包装件另含18650电池组 FE01。该包装件内锂电池总净重为0.474kg）`)).toBe(237)
      expect(matchBatteryWeight(`(注：单块电池重量约为94.2g。)`)).toBe(94.2)
      expect(matchBatteryWeight(`（注：该电池已经做好防短路措施并已采取防止意外启动措施。单块电池的重量约为65.6g。设备：LTE/WCDMA/GSM(GPRS) 多模数字移动电话机；型号：Z2460；商标：nubia。每台设 备内置1块电池，每包装件内含1台设备。）`)).toBe(65.6)
      expect(matchBatteryWeight(`（注：该电池已经做好防短路措施并已采取防止意外启动措施。单块电池的重量约为101.6g。设备：充气泵；型号：W8049。每台设备内置1块电池，每包装件内含24台设备。）      `)).toBe(101.6)
      expect(matchBatteryWeight(`（注：该电池已经做好防短路措施并已采取防止意外启动措施。单块电池的重量约为38.433g。设备：便携式无线路由器；型号：U10N；商标：ZTE。每台设备内置1块电池，每包装件 内含1台设备。)`)).toBe(38.433)
      expect(matchBatteryWeight(`（注：单块电芯的重量约为171.57g。）`)).toBe(171.57)
      expect(matchBatteryWeight(`（注：单个TWS 充电盒的重量约为29.9g。无线耳机型号：Air Neo，内置1块锂离子聚合物电芯 YF 401010，电芯额定瓦特小时为0.111Wh，单块电芯的重量为0.743g，锂离子电芯符合包装说明967第II部分。每个充电盒与一对耳机合包在一个零售包装内，整个包装件内含100个充电盒和200个耳机电芯，包装件内锂电池总净重为3.1386kg。)`)).toBe(29.9)
      expect(matchBatteryWeight(`（注：该电芯已经做好防短路措施并已采取防止意外启动措施。单块电芯的重量约为9.44g。设备：一次性电子烟；型号：VUSE GO；商标：VUSE。每台设备内置1块电芯，每包装件内 含240台设备。该产品含2ML烟油（STRAWBERRY ICE 草莓冰，共1种口味，尼古丁含量为20MG/ML），该烟油不受本规则限制。）`)).toBe(9.44)
      expect(matchBatteryWeight(`（注：该电芯已经做好防短路措施并已采取防止意外启动措施。单块电芯的重量约为9.44g。设备：一次性电子烟；型号：VUSE GO；商标：VUSE。每台设备内置1块电芯，每包装件内 含240台设备。该产品含2ML烟油（STRAWBERRY ICE 草莓冰，共1种口味，尼古丁含量为20MG/ML），该烟油不受本规则限制。）`)).toBe(9.44)
      expect(matchBatteryWeight(`（注：该电池已经做好防短路措施并已采取防止意外启动措施。单块电池的重量约为11.45g。设备：无线键盘带皮套；型号：TTCCMIP109。每台设备内置1块电池，每包装件内含20台 设备。）`)).toBe(11.45)
      expect(matchBatteryWeight(`(注：单块电池重量约为5.7g。)`)).toBe(5.7)
      expect(matchBatteryWeight(`（注：单块电池的重量约为392.8g。）`)).toBe(392.8)
      expect(matchBatteryWeight(`（注：单块电池的重量约为524.838g。设备：锂电扳手；型号：BLW320。每台设备与1块电池包装在一起，每包装件内含9台设备。）`)).toBe(524.838)
      expect(matchBatteryWeight(`（注：该电池已经做好防短路措施并已采取防止意外启动措施。单块电池的重量约为66.331g。设备：智能手机；型号：TA-1658；商标：HMD。每台设备内置1块电池，每包装件内含10台设备。)`)).toBe(66.331)
      expect(matchBatteryWeight(`（注：该电池已经做好防短路措施并已采取防止意外启动措施。单块电池的重量约为66.331g。设备：智能手机；型号：TA-1643；商标：HMD。每台设备内置1块电池，每包装件内含10台设备。)`)).toBe(66.331)
      expect(matchBatteryWeight(`（注：该电池已经做好防短路措施并已采取防止意外启动措施。单块电池的重量约为66.331g。设备：智能手机；型号：TA-1640；商标：HMD。每台设备内置1块电池，每包装件内含10台设备。)`)).toBe(66.331)
      expect(matchBatteryWeight(`（注：该电池已经做好防短路措施并已采取防止意外启动措施。单块电池的净重约为71.8g。设备：数码望远镜；型号：NV4-8X40。每台设备内置1块电池，每包装件内含12台设备。）`)).toBe(71.8)
      expect(matchBatteryWeight(`（注：单块电池的重量约为1.22g。）`)).toBe(1.22)
      expect(matchBatteryWeight(`（注：该电池已经做好防短路措施并已采取防止意外启动措施。单块电池的重量约为195.2g。设备：倍思 S1 Pro 户外摄像头；型号：S0SU00；商标：baseus。每台设备内置1块电池 ，每包装件内含8台设备。）`)).toBe(195.2)
      expect(matchBatteryWeight(`（注：该电池已经做好防短路措施并已采取防止意外启动措施。单块电池的重量约为9.2g。设备：ELARI 4G 儿童手表；型号：4G-W。每台设备内置1块电池，每包装件内含50台设备。)`)).toBe(9.2)
      expect(matchBatteryWeight(`（注：该电池已经做好防短路措施并已采取防止意外启动措施。单块电池的重量约为66.331g。设备：智能手机；型号：TA-1670；商标：HMD。每台设备内置1块电池，每包装件内含10台设备。)`)).toBe(66.331)
      expect(matchBatteryWeight(`（注：该电池已经做好防短路措施并已采取防止意外启动措施。单块电池的重量约为7.4g。设备：电子秤；型号：EFS-E661-WUS。每台设备内置1块电池，每包装件内含5台设备。)`)).toBe(7.4)
      expect(matchBatteryWeight(`（注：该电芯已经做好防短路措施并已采取防止意外启动措施。单块电芯的重量约为7.8g。设备：一次性电子烟；型号：CRISTALLITE；商标：SALT。每台设备内置1块电芯，每包装件内含280台设备。该产品含2mL烟油（BUZLU GILƏ 浆果冰/BUZLU QARAQARAǦAT 黑加仑冰/MIX GILƏMEYVƏ 蓝莓覆盆子/BUZLU ALBALI 樱桃冰/FREȘ MENTOL MOXITO 新鲜薄荷莫吉托/KIVI MARAKUYA QUAVA 奇异果百香 果番石榴/LIMON VƏ LAYM 柠檬青柠/ANANAS ȘAFTALI MANQO 菠萝桃子芒果/BUZLU QARPIZ 西瓜冰/BUZLU ȘAFTALI 桃子冰，共10个口味，尼古丁含量为20mg/mL），该烟油完全吸附于白色吸附棉中，无游离液体，烟油不受本规则限制。)`)).toBe(7.8)
      expect(matchBatteryWeight(`（注：该电池已经做好防短路措施并已采取防止意外启动措施。单块电池的重量约为148.2g。设备：暴力风扇；型号：X3-M。每台设备内置1块电池，每包装件内含32台设备。）`)).toBe(148.2)
      expect(matchBatteryWeight(`（注：单块电芯的重量约为15.2g。）`)).toBe(15.2)
      expect(matchBatteryWeight(`（注：该电池已经做好防短路措施并已采取防止意外启动措施。单块电池的重量约为7.4g。设备：电子秤；型号：EFS-E661-KUS。每台设备内置1块电池，每包装件内含5台设备。)`)).toBe(7.4)
      expect(matchBatteryWeight(`（注：单块电芯的重量约为8.02g。）`)).toBe(8.02)
      expect(matchBatteryWeight(`（注：单块电池的重量约为290.5g）`)).toBe(290.5)
      expect(matchBatteryWeight(`(注：单块电池重量约为90.6g。)`)).toBe(90.6)
      expect(matchBatteryWeight(`（注：单块电芯的重量约为34.5g。）`)).toBe(34.5)
      expect(matchBatteryWeight(`（注：该电池已经做好防短路措施并已采取防止意外启动措施。单块电池的重量约为37.0g。设备：XP4 平板电脑；型号：XP4；商标：Imagineear。每台设备内置1块电池，每包装件 内含50台设备。)`)).toBe(37)
      expect(matchBatteryWeight(`(注：单块电池重量约为37.0g。)`)).toBe(37)
      expect(matchBatteryWeight(`（注：该电池已经做好防短路措施并已采取防止意外启动措施。单块电池的重量约为96.5g。设备：POS 终端；型号：S300。每台设备内置1块电池，每包装件内含20台设备。该包装件另含锂-二氧化锰电池 CR2430，该包装件中锂电池总净重为2.02kg。)`)).toBe(96.5)
      expect(matchBatteryWeight(`（注：该电芯已经做好防短路措施并已采取防止意外启动措施。单块电芯的重量约为4.325g。设备：POS 终端；型号：S300。每台设备内置电芯1块，每个包装件内含20台设备。该包 装件另含可充电锂离子电池 SX18650-2S1P，该包装件中锂电池总净重为2.02kg。)`)).toBe(4.325)
      expect(matchBatteryWeight(`(注：单块电芯重量约为10.5g。)`)).toBe(10.5)
      expect(matchBatteryWeight(`（注：该电池已经做好防短路措施并已采取防止意外启动措施。单块电池的净重约为14.16kg。设备：自主移动机器人；型号：KMP 600i-2.5-5G diffDrive；商标：KUKA。每台设备内置1块电池，每包装件内含1台设备。）`)).toBe(14160)
      expect(matchBatteryWeight(`（注：该电池已经做好防短路措施并已采取防止意外启动措施。单块电池的净重约为14.16kg。设备：自主移动机器人；型号：KMP 600i-2.5 diffDrive；商标：KUKA。每台设备内置1块电池，每包装件内含1台设备。）`)).toBe(14160)
      expect(matchBatteryWeight(`（注：单块电池的重量约为66.7g。设备：移动手机；型号：X-style 351 Lider。每台设备与1块电池包装在一起，每包装件内含20台设备。）`)).toBe(66.7)
      expect(matchBatteryWeight(`(注：单块电池重量约为11g。)`)).toBe(11)
      expect(matchBatteryWeight(`（注：单块电池的重量约为8654g。）`)).toBe(8654)
      expect(matchBatteryWeight(`（注：单块电池的重量约为3.237kg。）`)).toBe(3237)
      expect(matchBatteryWeight(`（注：该电池已经做好防短路措施并已采取防止意外启动措施。单块电池的净重约为14.16kg。设备：自主移动机器人；型号：KMP 600i-1.3-5G diffDrive；商标：KUKA。每台设备内置1块电池，每包装件内含1台设备。）`)).toBe(14160)
      expect(matchBatteryWeight(`（注：该电芯已经做好防短路措施并已采取防止意外启动措施。单块电芯的重量约为7.8g。设备：一次性电子烟；型号：CRISTALLITE；商标：SALT。每台设备内置1块电芯，每包装件内含280台设备。该产品含2mL烟油（苹果冰 APPLE ICE/浆果冰 BERRY ICE/黑加仑冰 BLACKCURRANT ICE/蓝莓覆盆子 BLUEBERRY RASPBERRY/樱桃冰 CHERRY ICE/可乐冰 COLA ICE/冰薄荷 MENTHOL/桃子冰 PEACH ICE/菠萝桃子芒果 PINEAPPLE PEACH MANGO/草莓冰 STRAWBERRY ICE/烟草 TOBACCO/西瓜冰 WATERMELON ICE，共12个口味，尼古丁含量为20mg/mL），该烟油完全吸附于白色吸附棉中，无游离液体，烟油不受本规则 限制。)`)).toBe(7.8)
      expect(matchBatteryWeight(`（注：单块电芯的重量约为7.34g。）`)).toBe(7.34)
      expect(matchBatteryWeight(`（注：该电池已经做好防短路措施并已采取防止意外启动措施。单块电池的净重约为14.16kg。设备：自主移动机器人；型号：KMP 600i-1.3 diffDrive；商标：KUKA。每台设备内置1块电池，每包装件内含1台设备。）`)).toBe(14160)
      expect(matchBatteryWeight(`（注：该电池已经做好防短路措施并已采取防止意外启动措施。单块电池的重量约为3.8g。设备：智能眼镜；型号：LCD008-10。每台设备内置1块电池，每包装件内含6台设备。)    `)).toBe(3.8)
      expect(matchBatteryWeight(`（注：单块电池的重量约为148.4g。）`)).toBe(148.4)
      expect(matchBatteryWeight(`（注：该电池已经做好防短路措施并已采取防止意外启动措施。单块电池的重量约为45.7g。设备：电动咖啡研磨器；型号：KMDJ-5C。每台设备内置1块电池，每包装件内含15台设备 。）`)).toBe(45.7)
      expect(matchBatteryWeight(`（注：单块电芯的重量约为6.45g。）`)).toBe(6.45)
      expect(matchBatteryWeight(`（注：该电池已经做好防短路措施并已采取防止意外启动措施。单块电池的重量约为45.7g。设备：电动咖啡研磨器；型号：KMDJ-4AW。每台设备内置1块电池，每包装件内含20台设备。）`)).toBe(45.7)
      expect(matchBatteryWeight(`（注：该电池已经做好防短路措施并已采取防止意外启动措施。单块电池的重量约为6.1g。设备：无线蓝牙耳机；型号：A3062；商标：soundcore。每台设备内置2块电池，每包装件 内含1台设备。）`)).toBe(6.1)
      expect(matchBatteryWeight(`（注：该电池已经做好防短路措施并已采取防止意外启动措施。单块电池的重量约为45.7g。设备：电动咖啡研磨器；型号：KMDJ-4A。每台设备内置1块电池，每包装件内含20台设备 。）`)).toBe(45.7)
      expect(matchBatteryWeight(`（注：单块电池的重量约为203.0g。）`)).toBe(203)
      expect(matchBatteryWeight(`（注：单块电池的重量约为148.8g。）`)).toBe(148.8)
      expect(matchBatteryWeight(`（注：该电池已经做好防短路措施并已采取防止意外启动措施。单块电池的重量约为45.7g。设备：电动咖啡研磨器；型号：KMDJ-2AW。每台设备内置1块电池，每包装件内含24台设备。）`)).toBe(45.7)
      expect(matchBatteryWeight(`（注：该电池已经做好防短路措施并已采取防止意外启动措施。单块电池的重量约为225.764g。设备：笔记本电脑；型号：DN39-140H2-YD-R02。每台设备内置1块电池，每包装件内含1台设备。)`)).toBe(225.764)
      expect(matchBatteryWeight(`（注：该电池已经做好防短路措施并已采取防止意外启动措施。单块电池的重量约为225.764g。设备：笔记本电脑；型号：N23J2。每台设备内置1块电池，每包装件内含1台设备。)  `)).toBe(225.764)
      expect(matchBatteryWeight(`（注：该电芯已经做好防短路措施并已采取防止意外启动措施。单块电芯的重量约为10.6g。设备：标签定位器；型号：BS-LB-01；商标：Roambee。每台设备内置电芯1块，每包装件 内含100台设备。）`)).toBe(10.6)
      expect(matchBatteryWeight(`（注：单块电池的重量约为47.1g。）`)).toBe(47.1)
      expect(matchBatteryWeight(`（注：该电池已经做好防短路措施并已采取防止意外启动措施。单块电池的重量约为107.5g。设备：笔记本电脑；型号：E140。每台设备内置1块电池，每包装件内含5台设备。）`)).toBe(107.5)
      expect(matchBatteryWeight(`（注：单块电芯的重量约为8.30g。）`)).toBe(8.3)
      expect(matchBatteryWeight(`（注：该电芯已经做好防短路措施并已采取防止意外启动措施。单块电芯的重量约为18.1g。设备：Tweeze-it 夹具设备；型号：Tweeze-it。每台设备内置1块电芯，每包装件内含40 台设备。)`)).toBe(18.1)
      expect(matchBatteryWeight(`（注：该电池已经做好防短路措施并已采取防止意外启动措施。单块电池的重量约为45.7g。设备：电动咖啡研磨器；型号：KMDJ-3AW。每台设备内置1块电池，每包装件内含20台设备。）`)).toBe(45.7)
      expect(matchBatteryWeight(`（注：该电池已经做好防短路措施并已采取防止意外启动措施。单块电池的净重约为118.6g。设备：汽车诊断扫描仪；型号：NT1009。每台设备内置1块电池，每包装件内含4台设备。）`)).toBe(118.6)
      expect(matchBatteryWeight(`(注：单块电池重量约为389.6g。)`)).toBe(389.6)
      expect(matchBatteryWeight(`（注：该电池已经做好防短路措施并已采取防止意外启动措施。单块电池的重量约为89.261g。设备：平板电脑；型号：TE10D1M64。每台设备内置1块电池，每包装件内含20台设备。)`)).toBe(89.261)
      expect(matchBatteryWeight(`（注：单块电池的重量约为414.8g。）`)).toBe(414.8)
      expect(matchBatteryWeight(`（注：单块电池的重量约为82.6g。设备：移动数据终端；型号：CT37-X0N。每台设备与1块电池包装在一起，每包装件内含20台设备。该包装件另含可充式锂离子电池组 341322PM4。该包装件内锂电池总净重为1.693kg）`)).toBe(82.6)
      expect(matchBatteryWeight(`（注：该电芯已经做好防短路措施并已采取防止意外启动措施。单块电芯的重量约为10.6g。设备：一次性电子烟；型号：T12000；商标：TUGBOAT。每台设备内置1块电芯，每包装件 内含200台设备。该产品含少量烟油（草莓奇异果 STRAWBERRY KIWI/混合莓果 MIXED BERRIES/芒果香瓜 MANGO MELON/双苹果水烟 DOUBLE APPLE/葡萄 GRAPE/芒果百香果 MANGO PASSION FRUIT/黑加仑荔枝 BLACKCURRANT，共7个口味，含尼古丁20mg/ml），该烟油完全吸附于白色吸附棉中，无游离液体，该烟油不受本规则限制。）`)).toBe(10.6)
      expect(matchBatteryWeight(`（注：该电池已经做好防短路措施并已采取防止意外启动措施。单块电池的重量约为2.041g。设备：移动数据终端；型号：CT37-X0N。每台设备内置1块电池，每包装件内含20台设备 。该包装件另含可充式锂离子电池组 CT37-BTSC。该包装件内锂电池总净重为1.693kg)`)).toBe(2.041)
      expect(matchBatteryWeight(`（注：该电池已经做好防短路措施并已采取防止意外启动措施。单块电池的净重约为118.6g。设备：汽车诊断扫描仪；型号：NT909。每台设备内置1块电池，每包装件内含4台设备。 ）`)).toBe(118.6)
      expect(matchBatteryWeight(`(注：单块电池重量约为21.307g。)`)).toBe(21.307)
      expect(matchBatteryWeight(`（注：单块电芯的重量约为2.025Kg。）`)).toBe(2025)
      expect(matchBatteryWeight(`（注：该电池已经做好防短路措施并已采取防止意外启动措施。单块电池的重量约为2.041g。设备：移动数据终端；型号：CT37-X0N。每台设备内置1块电池，每包装件内含20台设备 。该包装件另含可充式锂离子电池组 CT37-BTSC。该包装件内锂电池总净重为1.693kg)`)).toBe(2.041)
      expect(matchBatteryWeight(`（注：单块电芯的重量约为19.9g。）`)).toBe(19.9)
      expect(matchBatteryWeight(`（注：单块电池的重量约为82.6g。设备：移动数据终端；型号：CT37-X0N。每台设备与1块电池包装在一起，每包装件内含20台设备。该包装件另含可充式锂离子电池组 341322PM4。该包装件内锂电池总净重为1.693kg）`)).toBe(82.6)
      expect(matchBatteryWeight(`（注：单块电芯的净重为46.44g。)`)).toBe(46.44)
    })

    it('应正确处理不同单位和大小写', () => {
      expect(matchBatteryWeight('为200 g')).toBe(200)
      expect(matchBatteryWeight('为1 Kg')).toBe(1000)
      expect(matchBatteryWeight('为1.5 kg')).toBe(1500)
    })

    it('应处理无单位的情况', () => {
      expect(matchBatteryWeight('为250')).toBe(250)
    })

    it('应处理无效输入', () => {
      expect(matchBatteryWeight('重量不明')).toBe(0)
      expect(matchBatteryWeight('')).toBe(0)
    })
  })

  // 组合情景测试
  describe('复杂情景测试', () => {
    const text = '锂离子电池 18650 3.7V 2000mAh 7.4Wh 重量为45g'

    it('应从复杂文本中提取正确的值', () => {
      expect(matchVoltage(text)).toBe(3.7)
      expect(matchCapacity(text)).toBe(2000)
      expect(matchWattHour(text)).toBe(7.4)
      expect(matchBatteryWeight('为45g')).toBe(45)
    })
  })


  // (async () => {
//     async function sleep(ms) {
//       return new Promise((resolve) => setTimeout(resolve, ms))
//     }
//     let arr = [];
//     for (let i = 0; i < 100; i++) {
//       const anchor = document.querySelector(`#datagrid-row-r4-2-${i} > td:nth-child(1) > div > a`)
//       const url = new URL(anchor.href)
//       const query = new URLSearchParams(url.search)
//       const projectId = query.get('projectId')
//       const res = await fetch(`/rest/sek/inspect/battery/${projectId}`, {
//         method: 'GET',
//         credentials: 'include',
//       })
//       if (!res.ok) {
//         continue;
//       }
//       const data = await res.json()
//       if (data.editStatus !== 3) continue
//       arr.push(data)
//       console.log(data.projectNo)
//       await sleep(500)
//     }
//     console.log(arr)
//   }
// )();


  // 验证
  describe('验证', () => {
    it('验证空运数据', () => {
      for (let i = 1; i < 100; i++) {
        const data = JSON.parse(readFileSync(`./tests/data/pek/data${i}.json`, 'utf8'));
        const result = checkPekBtyType(data)
        if (result.length === 0) continue;
        if ([48].includes(i) && result[0].result.includes('能量密度')) continue;
        if ([68].includes(i) && result[0].result=='容量*电压 与 瓦时数 误差大于5%') continue;
        console.log(data)
        console.log(result)
        console.log(i)
        expect(result.length).toBe(0)
      }
    })
    it('验证海运数据', () => {
      for (let i = 1; i < 99; i++) {
        const data = JSON.parse(readFileSync(`./tests/data/sek/data${i}.json`, 'utf8'));
        const result = checkSekBtyType(data)
        if (result.length === 0) continue;
        if ([17,28,66,92].includes(i) && result[0].result.includes('能量密度')) continue;
        if ([48].includes(i) && result[0].result.includes('包装必须达到 II 级包装的性能标准')) continue;
        if (i===55&&result.length===6) continue;
        console.log(data)
        console.log(result)
        console.log(i)
        expect(result.length).toBe(0)
      }
    })
  })

  // describe('process', () => {
  //   it('验证空运数据', () => {
  //     const data = JSON.parse(readFileSync(`./tests/data/sek/data.json`, 'utf8'));
  //     let i = 0;
  //     data.forEach((item) => {
  //       writeFileSync(`./tests/data/sek/data${i}.json`,JSON.stringify(item, null, 2), 'utf8')
  //       i++
  //     })
  //   })
  // })
})
